{"version":3,"sources":["components/SimplePanel.jsx","components/PlayModes.jsx","components/PlaybackModes.jsx","components/Instruments.jsx","components/PresetsLib.jsx","localization/pl-pl.jsx","localization/zh-cn.jsx","components/Locale.jsx","components/SimpleProgress.jsx","components/Utils.jsx","components/Planner.jsx","components/EditPresetModal.jsx","components/ImportDialog.jsx","components/Config.jsx","components/PresetsManager.jsx","components/PracticeTimer.jsx","components/SvgClock.jsx","components/Sliders/GeometricSlider.jsx","components/Sliders/RangeEditInPlace.jsx","components/Sliders/AdvancedRange.jsx","components/Sliders/EditInPlace.jsx","components/Sliders/AdvancedSlider.jsx","components/Sliders/DiscreteSlider.jsx","components/ModePanel.jsx","components/TrackView/TrackRow.jsx","components/TrackView/TrackView.jsx","components/SoundLibrary.jsx","components/SoundMachine.jsx","App.jsx","serviceWorker.js","index.js"],"names":["SimplePanel","Component","render","React","createElement","Container","className","this","props","Row","title","children","defaultProps","PlayModes","PlaybackModes","Instruments","TABLA","key","label","ELECTRO_KIT","METRONOME","BASIC_DRUM_KIT","YAMAHA_RX5","Samples","file","instrumentKey","InstrumentsByKey","Object","keys","map","item","idx","PresetsLib","playMode","byTimeInterval","bpmStep","bpmRange","track","playbackMode","byBarInterval","stepsNum","isHidden","InitPreset","pl","1","2","3","4","5","zh","GetNavigatorLanguage","navigator","languages","length","userLanguage","language","browserLanguage","locale","Tr","text","TrRange","number","l","SimpleProgress","constructor","arguments","state","style","width","value","display","Utils","toLocaleDateTime","dateTime","Date","toLocaleString","dateStyle","timeStyle","padTime","t","formatTime","timeInSeconds","formatTimeFull","formatTimeLong","hLabel","mLabel","sLabel","usePad","setSeconds","h","getHours","m","getMinutes","s","getSeconds","o","trim","storageAvailable","type","storage","window","x","setItem","removeItem","e","DOMException","code","name","Planner","steps","currentStepIdx","stepProgress","planProgress","isUpDown","isPaused","barRender","b","cls","stepIdx","onClick","startStep","duration","Infinity","Fragment","durationFormatted","durationBars","Math","floor","bpm","toFixed","makePlan","segments","max","segment","push","constantBpmSlider","exerciseTime","rev","slice","reverse","shift","concat","isRandom","shuffle","array","temporaryValue","randomIndex","currentIndex","random","onPlanStep","setState","stepChanged","updateProgress","step","getStep","transport","ticks","startTimeTicks","Tone","Time","toTicks","endTime","clamp","min","undefined","setPlan","config","plan","baseBpm","timeSignature","events","totalPlanTime","i","beatDuration","schedule","time","durationInBars","bar","calcTimeForBpm","Error","onPlanEnd","prevState","seconds","stepForward","stepBackward","getCurrentStep","onPlaybackChange","newPlaybackMode","onChange","onUpDownBtn","onRandomBtn","height","overflow","Collapse","isOpen","ButtonGroup","size","Button","outline","active","NaN","EditPresetModal","modal","nestedModal","preset","presetId","showDelete","toggle","toggleNested","handleSave","onSave","edit","titleChanged","newTitle","target","_objectSpread","handleDelete","onDeleteBtn","renderDelete","color","marginTop","onSaveBtn","Modal","ModalHeader","ModalBody","Input","placeholder","defaultValue","ModalFooter","ImportDialog","showInvalidFileAlert","open","close","onPresetsLoaded","json","JSON","parse","result","onJsonReady","onUploadBtn","reader","FileReader","onload","readAsText","files","onImportBtn","Alert","hidden","Config","TRACKS_NUMBER","MAXIMUM_TIMESIGNATURE","MIN_BPM","MAX_BPM","PROGRESS_UPDATE_FPS","COLOR_PALETTE","0","PresetsManager","super","showEdit","userPresets","storedPresets","localStorage","getItem","Array","fill","validatePreset","interval","accents","beatIdx","beats","beat","samples","convertInstrumentKeyToSamples","filter","el","onPresetClick","onSelect","onSavePreset","apply","p","savedDtm","findIndex","saveInLocalStorage","presets","stringify","showDeleteBtn","showEditBtn","hideEditBtn","onPresetDelete","newPresets","splice","onPresetEdit","getPreset","refs","presetEditor","importDialog","renderUserPresets","Col","textAlign","xs","onExport","a","document","Blob","href","URL","createObjectURL","download","click","onPresetsImport","forEach","userPresetsJson","isHeader","justifyContent","ref","PracticeTimer","minutes","secondsRemaining","isRunning","timerId","tick","clearTimer","onTimeUp","handleStart","parseInt","setInterval","handlePause","handleResume","handleReset","onMinutesChange","v","test","componentWillUnmount","clearInterval","displaySeconds","InputGroup","disabled","InputGroupAddon","addonType","fontSize","SvgClock","colorEmpty","strokeColor","strokeWidth","setAccents","getCoordinatesForPercent","percent","r","cos","PI","sin","drawSlices","radius","trackIdx","pctStep","slices","volume","subIdx","cumulativePercent","paths","startX","startY","endX","endY","largeArcFlag","pathData","join","d","stroke","drawText","labels","y","textAnchor","transform","setProgress","progress","line","radiusIncrement","circles","cx","cy","container","viewBox","svg","strokeLinecap","x1","y1","x2","y2","partProgress","GeometricSlider","regression","onMinusClick","newValue","btnStep","onPlusClick","exponential","precision","prepareMarks","marks","marksAt","findX","predict","log","equation","setValue","Badge","onBadgeClick","badgeFormatter","Slider","included","marksNum","marksStyle","desc","markFormatter","RangeEditInPlace","showInvalidRange","onOk","onMinValueChange","Number","onMaxValueChange","AdvancedRange","Range","editor","onEdit","bounds","onAfterChange","editInPlace","assign","EditInPlace","onValueChange","val","AdvancedSlider","disableBtns","DiscreteSlider","innerValue","innerMarks","values","componentDidUpdate","prevProps","theValue","indexOf","onSliderChange","sliderValue","margin","whiteSpace","ModePanel","bpmStepDropdownOpen","onBpmSliderChange","onModeChange","newMode","newState","onBpmRangeChange","onBpmStepChange","onBpmStepSelect","byBarSlider","byTimeSlider","onTimeIntervalChange","onBarIntervalChange","byBarFormatter","barsNum","renderIncreaseBpmDropdown","ButtonDropdown","DropdownToggle","caret","DropdownMenu","DropdownItem","onStepsSliderChange","onExerciseTimeSliderChange","renderTimeSlider","renderStepsSlider","10","15","20","30","40","50","60","70","80","90","100","renderSpeedRange","pushable","150","200","TrackRow","activeIdx","componentDidMount","instrument","onSampleSelect","addBeat","trackRow","onMeasureChange","removeBeat","onSampleChange","sampleDropdownOpen","filename","soundLibrary","use","playersArr","fullLabel","sample","alignSelf","vertical","backgroundColor","TrackView","rowRefs","handleCellClick","sampleIdx","columnIdx","indicator","left","minLeft","maxRight","updateDimensions","cellsBBtop","trackRow_0","cellsDiv","getBoundingClientRect","cellsBBbottom","trackRow_3","box","top","bottom","right","offsetLeft","offsetWidth","addEventListener","pop","onTrackRowSignatureChange","trackId","newTimeSignature","indicatorProgress","padding","SoundLibrary","players","Players","reverb","Reverb","toMaster","decay","predelay","generate","wet","connect","add","player","get","find","getSamples","play","loaded","start","setReverb","SoundMachine","initialized","Transport","tone","repeat","setBpm","isNaN","documentTitle","lookAhead","part","Part","note","loop","getConfig","initProgressUpdate","onReady","modePanel","onProgress","cancel","position","setTrack","planner","createPoly","setTimeSignature","removeAll","loopEnd","debug","innerHTML","svgClock","trackView","stop","onControlChange","onPresetSelect","onTrackChange","newTrack","onVolumeChange","newVolume","Master","onReverbChange","handleKey","preventDefault","KeyboardEventHandler","handleKeys","onKeyEvent","isPlaying","block","App","showMask","ReactGA","initialize","trackingId","gaOptions","cookieDomain","pageview","location","pathname","search","removeLoadMask","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","onUpdate","onSuccess","catch","error","ReactDOM","getElementById","process","origin","fetch","response","contentType","headers","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.75c6cee0.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport {Container, Row} from 'reactstrap'\r\n\r\nclass SimplePanel extends Component {\r\n    render() { \r\n        return (\r\n            <Container className={\"pane \" + this.props.className}>\r\n\t\t\t\t<Row className=\"pane-title\">{this.props.title}</Row>\r\n\t\t\t\t<Row className=\"pane-body\">{this.props.children}</Row>\r\n            </Container>\r\n            );\r\n    }\r\n}\r\n \r\nexport default SimplePanel;\r\n\r\n\r\nSimplePanel.defaultProps = {\r\n    title: 'title',\r\n    children: [],\r\n    className: ''\r\n };","\r\n// NOTE: If we change any of existing string names we will screw up user presets on client's side\r\nexport const PlayModes = {\r\n\tBY_BAR: \"by_bar\",\r\n\tBY_TIME: \"by_time\",\r\n\tSET_TIME: \"set_time\",\r\n\tCONSTANT: \"constant\"\r\n};","export const PlaybackModes = {\r\n\tSTOP: \"stop\",\r\n\tCYCLE: \"cycle\",\r\n\tREPEAT: \"repeat\",\r\n\tCONTINUE: \"continue\"\r\n};","export const Instruments = {\r\n    TABLA: {\r\n        key: 'tabla',\r\n        label: 'Tabla'\r\n    },\r\n    ELECTRO_KIT: {\r\n        key: 'electrokit',\r\n        label: 'Electronic Kit'\r\n        \r\n    },\r\n    METRONOME: {\r\n        key: 'metronome',\r\n        label: 'Metronome'\r\n        \r\n    },\r\n    BASIC_DRUM_KIT: {\r\n        key: 'basicdrumkit',\r\n        label: 'Basic Drum Kit'\r\n        \r\n    },\r\n    YAMAHA_RX5: {\r\n        key: 'yamaha_rx5',\r\n        label: 'Yamaha RX 5'\r\n    }\r\n};\r\n\r\n\r\nexport const Samples = [\r\n{\r\n        file: \"dha-slide.wav\",\r\n        label: \"Dha\",\r\n        instrumentKey: 'tabla'\r\n    }, {\r\n        file: \"dhin-slide.wav\",\r\n        label: \"Dhin\",\r\n        instrumentKey: 'tabla'\r\n    }, {\r\n        file: \"tin.wav\",\r\n        label: \"Tin\",\r\n        instrumentKey: 'tabla'\r\n    },{\r\n        file: \"Kick.wav\",\r\n        label: \"Kick\",\r\n        instrumentKey: 'electrokit'\r\n    }, {\r\n        file: \"Snare.wav\",\r\n        label: \"Snare\",\r\n        instrumentKey: 'electrokit'\r\n    }, {\r\n        file: \"HiHat.wav\",\r\n        label: \"Hi Hat\",\r\n        instrumentKey: 'electrokit'\r\n    }, {\r\n        file: \"tap.wav\",\r\n        label: \"Tap\",\r\n        instrumentKey: 'metronome'\r\n    }, {\r\n        file: \"down.wav\",\r\n        label: \"Down\",\r\n        instrumentKey: 'metronome'\r\n    }, {\r\n        file: \"up.wav\",\r\n        label: \"Up\",\r\n        instrumentKey: 'metronome'\r\n    },\r\n    {\r\n        file: \"Kick.wav\",\r\n        label: \"Kick\",\r\n        instrumentKey: 'basicdrumkit'\r\n    }, {\r\n        file: \"Snare.wav\",\r\n        label: \"Snare\",\r\n        instrumentKey: 'basicdrumkit'\r\n    }, {\r\n        file: \"ClosedHat.wav\",\r\n        label: \"Closed Hat\",\r\n        instrumentKey: 'basicdrumkit'\r\n    }, {\r\n        file: \"OpenHat.wav\",\r\n        label: \"Open Hat\",\r\n        instrumentKey: 'basicdrumkit'\r\n    },\r\n    {\r\n        file: \"Kick.wav\",\r\n        label: \"Kick\",\r\n        instrumentKey: 'yamaha_rx5'\r\n    }, {\r\n        file: \"Rim.wav\",\r\n        label: \"Rim\",\r\n        instrumentKey: 'yamaha_rx5'\r\n    }, {\r\n        file: \"Ride.wav\",\r\n        label: \"Ride\",\r\n        instrumentKey: 'yamaha_rx5'\r\n    }, {\r\n        file: \"Cowbell.wav\",\r\n        label: \"Cowbell\",\r\n        instrumentKey: 'yamaha_rx5'\r\n    }, {\r\n        file: \"Shaker.wav\",\r\n        label: \"Shaker\",\r\n        instrumentKey: 'yamaha_rx5'\r\n    }\r\n];\r\n\r\n\r\n\r\nconst InstrumentsByKey = {}\r\nObject.keys(Instruments).map(function (item, idx) {\r\n    InstrumentsByKey[Instruments[item].key] = Instruments[item];\r\n    // expected to return a value from arrow func\r\n    return true;\r\n});\r\nexport { InstrumentsByKey };\r\n\r\nexport const InstrumentsArray = Object.keys(Instruments)\r\n    .map(item => {\r\n        return Instruments[item]\r\n    });\r\n","import { PlayModes } from \"./PlayModes\"\r\nimport { PlaybackModes } from \"./PlaybackModes\"\r\nimport { Instruments } from \"./Instruments\";\r\n\r\nexport const PresetsLib = [\r\n    { \"isHeader\": true, title: \"Basic\" },\r\n    { title: \"Metronome 2/4\", \"bpmStep\": 20, \"bpmRange\": [100, 200], \"currentBpm\": 300, \"playbackMode\": \"stop\", \"playMode\": \"by_time\", \"stepsNum\": 10, \"exerciseTime\": 1800, \"bpmStepDropdownOpen\": false, \"byTimeInterval\": 60, \"byBarInterval\": 2, \"constantBpmSlider\": 300, \"interval\": 300, \"track\": [[2], [1]], \"instrumentKey\": \"metronome\" },\r\n\r\n    {\r\n        title: \"Metronome 4/4\",\r\n        instrumentKey: Instruments.METRONOME.key,\r\n        playMode: PlayModes.BY_TIME,\r\n        byTimeInterval: 60,\r\n        bpmStep: 20,\r\n        bpmRange: [100, 200],\r\n        track: [[2], [1], [1], [1]]\r\n    },\r\n    {\r\n        title: \"Metronome 3/4\",\r\n        instrumentKey: Instruments.METRONOME.key,\r\n        playMode: PlayModes.BY_TIME,\r\n        byTimeInterval: 60,\r\n        bpmStep: 20,\r\n        bpmRange: [100, 200],\r\n        track: [[2], [1], [1]]\r\n    },\r\n    { \"isHeader\": true, title: \"Drum Patterns\" },\r\n    {\r\n        title: \"Levee Break\",\r\n        instrumentKey: 'electrokit',\r\n        bpmRange: [300, 400],\r\n        track: [[0, 2], [0], [2], [], [1, 2], [], [2], [0], [2], [], [0, 2], [0], [1, 2], [], [2], []],\r\n        playMode: PlayModes.BY_BAR,\r\n        playbackMode: PlaybackModes.STOP,\r\n        byTimeInterval: 5,\r\n        byBarInterval: 10,\r\n        stepsNum: 10,\r\n        bpmStep: 10,\r\n        isHidden: true\r\n    },\r\n    { \"bpmStep\": 10, \"bpmRange\": [300, 400], \"currentBpm\": 300, \"playbackMode\": \"stop\", \"playMode\": \"by_bar\", \"stepsNum\": 10, \"exerciseTime\": 1800, \"bpmStepDropdownOpen\": false, \"byTimeInterval\": 5, \"byBarInterval\": 10, \"constantBpmSlider\": 300, \"track\": [[0, 2], [], [0, 2], [], [2, 1], [], [0, 2], [], [2, 0], [], [2, 0], [], [1, 2], [], [2, 0], []], \"instrumentKey\": \"electrokit\", \"title\": \"Basic Rock\" },\r\n    { \"bpmStep\": 10, \"bpmRange\": [300, 400], \"currentBpm\": 300, \"playbackMode\": \"stop\", \"playMode\": \"by_bar\", \"stepsNum\": 10, \"exerciseTime\": 1800, \"bpmStepDropdownOpen\": false, \"byTimeInterval\": 5, \"byBarInterval\": 10, \"constantBpmSlider\": 300, \"track\": [[0, 2], [], [2], [], [2, 1], [], [2], [0, 2], [2, 0], [], [0, 2], [], [1, 2], [], [2, 0], []], \"instrumentKey\": \"electrokit\", \"title\": \"Impeach the President\" },\r\n    { \"bpmStep\": 10, \"bpmRange\": [350, 600], \"currentBpm\": 300, \"playbackMode\": \"stop\", \"playMode\": \"by_time\", \"stepsNum\": 10, \"exerciseTime\": 1800, \"bpmStepDropdownOpen\": false, \"byTimeInterval\": 60, \"byBarInterval\": 10, \"constantBpmSlider\": 300, \"track\": [[0, 2], [2], [0, 2], [2], [2, 1], [2], [0, 2], [3, 1], [2], [2, 1], [0, 2], [2, 1], [2, 1], [0, 3], [2], [2, 1]], \"instrumentKey\": \"basicdrumkit\", \"title\": \"Funky Drummer\" },\r\n    { \"bpmStep\": 10, \"bpmRange\": [300, 400], \"currentBpm\": 300, \"playbackMode\": \"stop\", \"playMode\": \"by_bar\", \"stepsNum\": 10, \"exerciseTime\": 1800, \"bpmStepDropdownOpen\": false, \"byTimeInterval\": 5, \"byBarInterval\": 10, \"constantBpmSlider\": 300, \"track\": [[0, 2], [], [2], [], [1, 2], [], [2], [0], [2, 0], [], [0, 2], [], [1, 2], [], [2], []], \"instrumentKey\": \"electrokit\", \"title\": \"Walk This Way\" },\r\n    { \"bpmStep\": 10, \"bpmRange\": [300, 400], \"currentBpm\": 300, \"playbackMode\": \"stop\", \"playMode\": \"by_bar\", \"stepsNum\": 10, \"exerciseTime\": 1800, \"bpmStepDropdownOpen\": false, \"byTimeInterval\": 5, \"byBarInterval\": 10, \"constantBpmSlider\": 300, \"track\": [[0, 2], [], [2, 0], [], [1, 2], [], [2], [], [2], [], [0, 2], [0], [1, 2], [], [2], [0]], \"instrumentKey\": \"electrokit\", \"title\": \"It's a New Day\" },\r\n    { \"bpmStep\": 10, \"bpmRange\": [300, 400], \"currentBpm\": 300, \"playbackMode\": \"stop\", \"playMode\": \"by_bar\", \"stepsNum\": 10, \"exerciseTime\": 1800, \"bpmStepDropdownOpen\": false, \"byTimeInterval\": 5, \"byBarInterval\": 10, \"constantBpmSlider\": 300, \"track\": [[0], [], [], [0], [1, 2], [], [0], [], [0], [], [], [], [1, 2], [], [], []], \"instrumentKey\": \"electrokit\", \"title\": \"The Big Beat\" },\r\n    { \"bpmStep\": 20, \"bpmRange\": [300, 500], \"currentBpm\": 300, \"playbackMode\": \"stop\", \"playMode\": \"by_time\", \"stepsNum\": 10, \"exerciseTime\": 1800, \"bpmStepDropdownOpen\": false, \"byTimeInterval\": 120, \"byBarInterval\": 50, \"constantBpmSlider\": 300, \"interval\": 120, \"track\": [[0, 2], [], [0, 2], [], [1, 2], [], [0, 2], [], [0, 2], [], [0, 2], [], [1, 2], [], [0, 2], []], \"instrumentKey\": \"basicdrumkit\", \"title\": \"Rock\" },\r\n    { \"bpmStep\": 20, \"bpmRange\": [528, 600], \"currentBpm\": 300, \"playbackMode\": \"stop\", \"playMode\": \"constant\", \"stepsNum\": 10, \"exerciseTime\": 1800, \"bpmStepDropdownOpen\": false, \"byTimeInterval\": 120, \"byBarInterval\": 50, \"constantBpmSlider\": 600, \"interval\": 120, \"track\": [[0], [], [3], [], [1, 0], [], [3], [], [0], [2], [3], [], [1, 0], [], [0, 3], []], \"instrumentKey\": \"basicdrumkit\", \"title\": \"Techno\" },\r\n    { \"bpmStep\": 20, \"bpmRange\": [528, 600], \"currentBpm\": 300, \"playbackMode\": \"stop\", \"playMode\": \"constant\", \"stepsNum\": 10, \"exerciseTime\": 1800, \"bpmStepDropdownOpen\": false, \"byTimeInterval\": 120, \"byBarInterval\": 50, \"constantBpmSlider\": 400, \"interval\": 120, \"track\": [[0, 2], [], [2], [], [1, 2], [], [2], [0], [2], [], [0, 2], [], [1, 2], [0], [2], [0]], \"instrumentKey\": \"basicdrumkit\", \"title\": \"Hip Hop\" },\r\n\r\n    // Afro-Cuban\r\n    { \"isHeader\": true, title: \"Afro-Cuban\" },\r\n    { \"bpmStep\": 20, \"bpmRange\": [400, 600], \"currentBpm\": 300, \"playbackMode\": \"stop\", \"playMode\": \"by_time\", \"stepsNum\": 10, \"exerciseTime\": 1800, \"bpmStepDropdownOpen\": false, \"byTimeInterval\": 120, \"byBarInterval\": 2, \"constantBpmSlider\": 300, \"interval\": 120, \"track\": [[0, 1, 2], [2], [2], [0, 1, 2], [2, 0], [2], [1, 2], [0, 2], [0, 2], [2], [1, 2], [0, 2], [1, 2, 0], [2], [2], [0, 2]], \"instrumentKey\": \"yamaha_rx5\", \"title\": \"Son Clave\" },\r\n    { \"bpmStep\": 20, \"bpmRange\": [400, 600], \"currentBpm\": 300, \"playbackMode\": \"stop\", \"playMode\": \"by_time\", \"stepsNum\": 10, \"exerciseTime\": 1800, \"bpmStepDropdownOpen\": false, \"byTimeInterval\": 120, \"byBarInterval\": 2, \"constantBpmSlider\": 300, \"track\": [[0, 1, 2], [2], [2], [0, 1, 2], [2, 0], [2], [2], [0, 2, 1], [0, 2], [2], [2, 1], [0, 2], [2, 0, 1], [2], [2], [0, 2]], \"instrumentKey\": \"yamaha_rx5\", \"title\": \"Rumba\" },\r\n    { \"bpmStep\": 20, \"bpmRange\": [400, 600], \"currentBpm\": 300, \"playbackMode\": \"stop\", \"playMode\": \"by_time\", \"stepsNum\": 10, \"exerciseTime\": 1800, \"bpmStepDropdownOpen\": false, \"byTimeInterval\": 120, \"byBarInterval\": 2, \"constantBpmSlider\": 300, \"track\": [[0, 1, 2], [2], [2], [0, 1, 2], [2, 0], [2], [2, 1], [0, 2], [0, 2], [2], [2, 1], [0, 2], [2, 0], [2, 1], [2], [0, 2]], \"instrumentKey\": \"yamaha_rx5\", \"title\": \"Bossa Nova\" },\r\n    { \"bpmStep\": 20, \"bpmRange\": [400, 600], \"currentBpm\": 300, \"playbackMode\": \"stop\", \"playMode\": \"by_time\", \"stepsNum\": 10, \"exerciseTime\": 1800, \"bpmStepDropdownOpen\": false, \"byTimeInterval\": 120, \"byBarInterval\": 2, \"constantBpmSlider\": 300, \"track\": [[0, 1, 3], [], [], [1, 3], [0], [], [1, 3], [], [0, 1], [3], [3], [1], [0], [], [0, 1], []], \"instrumentKey\": \"yamaha_rx5\", \"title\": \"Soukous\" },\r\n    { \"bpmStep\": 20, \"bpmRange\": [400, 600], \"currentBpm\": 300, \"playbackMode\": \"stop\", \"playMode\": \"by_time\", \"stepsNum\": 10, \"exerciseTime\": 1800, \"bpmStepDropdownOpen\": false, \"byTimeInterval\": 120, \"byBarInterval\": 2, \"constantBpmSlider\": 300, \"track\": [[0, 3], [], [1], [1, 3], [0], [], [1, 3], [1], [0], [], [3, 1], [1], [0], [], [0, 1, 3], [1]], \"instrumentKey\": \"yamaha_rx5\", \"title\": \"Gahu\" },\r\n    { \"bpmStep\": 20, \"bpmRange\": [400, 600], \"currentBpm\": 300, \"playbackMode\": \"stop\", \"playMode\": \"by_time\", \"stepsNum\": 10, \"exerciseTime\": 1800, \"bpmStepDropdownOpen\": false, \"byTimeInterval\": 120, \"byBarInterval\": 2, \"constantBpmSlider\": 300, \"track\": [[0, 3], [], [1], [1], [0, 3], [], [1, 3, 0], [1], [0], [], [3, 1], [1], [0, 3], [], [0, 1], [1]], \"instrumentKey\": \"yamaha_rx5\", \"title\": \"Shiko\" },\r\n\r\n    // Polyrhythms\r\n    { \"isHeader\": true, title: \"Polyrhythms\" },\r\n    { \"title\": \"3 over 4\", \"bpmStep\": 20, \"bpmRange\": [100, 200], \"currentBpm\": 100, \"playbackMode\": \"stop\", \"playMode\": \"by_time\", \"stepsNum\": 10, \"exerciseTime\": 1800, \"bpmStepDropdownOpen\": false, \"byTimeInterval\": 60, \"constantBpmSlider\": 300, \"track\": [[1, 0, 0, 0], [0, 1, 1], [1, 1, 1, 1], [0, 0, 0, 0]], \"timeSignature\": 4, \"instrumentKey\": \"basicdrumkit\" },\r\n    { \"bpmStep\": 20, \"bpmRange\": [100, 200], \"currentBpm\": 300, \"playbackMode\": \"stop\", \"playMode\": \"by_time\", \"stepsNum\": 10, \"exerciseTime\": 1800, \"bpmStepDropdownOpen\": false, \"byTimeInterval\": 60, \"byBarInterval\": 2, \"constantBpmSlider\": 300, \"track\": [[1, 1, 0], [0, 0, 1], [1, 1, 1, 1], [0, 0, 0]], \"timeSignature\": 3, \"instrumentKey\": \"basicdrumkit\", \"title\": \"4 over 3\" },\r\n    { \"bpmStep\": 20, \"bpmRange\": [121, 359], \"currentBpm\": 300, \"playbackMode\": \"stop\", \"playMode\": \"set_time\", \"stepsNum\": 10, \"exerciseTime\": 1800, \"bpmStepDropdownOpen\": false, \"byTimeInterval\": 60, \"byBarInterval\": 2, \"constantBpmSlider\": 122, \"track\": [[1, 0, 1, 0, 1, 0], [1, 1, 1, 1], [1, 1, 1, 1, 1, 1], [0, 0, 0, 0, 0, 0]], \"timeSignature\": 6, \"instrumentKey\": \"basicdrumkit\", \"title\": \"2 over 3\" },\r\n\r\n    // ancient ones, but leave them for compaitibility\r\n    { \"isHeader\": true, title: \"Other\" },\r\n    { title: \"Balkan 1\", \"bpmRange\": [241, 400], \"accents\": [0, 2, 1, 0, 2, 1, 2], \"instrument\": Instruments.ELECTRO_KIT, \"playMode\": \"by_bar\", \"interval\": 20, \"bpmStep\": 30 },\r\n    { title: \"Balkan 2\", \"bpmRange\": [293, 400], \"accents\": [0, 1, 2, 0, 1, 2, 1], \"instrument\": Instruments.TABLA, \"playMode\": \"by_bar\", \"interval\": 300, \"bpmStep\": 30 },\r\n    { title: \"Groove 1\", \"bpmRange\": [222, 262], \"accents\": [0, 1, 2, 1, 2, 0, 2, 2], \"instrument\": Instruments.ELECTRO_KIT, \"playMode\": \"by_time\", \"interval\": 600, \"bpmStep\": 30 },\r\n    { title: \"Groove 2\", \"bpmRange\": [222, 400], \"accents\": [0, 1, 0, 1, 1, 1, 0, 2], \"instrument\": Instruments.ELECTRO_KIT, \"playMode\": \"by_bar\", \"interval\": 20, \"bpmStep\": 30 },\r\n\r\n];\r\n\r\n\r\n\r\nexport const InitPreset_debug = {\r\n    \"bpmStep\": 50,\r\n    \"bpmRange\": [\r\n        300,\r\n        400\r\n    ],\r\n    // \"currentBpm\": 100,\r\n    \"playbackMode\": \"stop\",\r\n    \"playMode\": PlayModes.CONSTANT,\r\n\r\n    \"exerciseTime\": 60 * 30,    // 30 minutes\r\n    \"stepsNum\": 30,             // 1 minutes per step\r\n    \"byTimeInterval\": 5,\r\n    \"byBarInterval\": 2,\r\n    \"constantBpmSlider\": 300,\r\n    \"track\": [[1, 1, 0, 1], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]],\r\n    \"samples\": [{ instrumentKey: 'tabla', file: 'dha-slide.wav' }, { instrumentKey: 'electrokit', file: 'Kick.wav' }, { instrumentKey: 'metronome', file: 'tap.wav' }],\r\n    \"timeSignature\": 4,\r\n    \"instrumentKey\": Instruments.ELECTRO_KIT.key\r\n}\r\n\r\n\r\nexport const InitPreset = {\r\n    \"bpmStep\": 5,\r\n    \"bpmRange\": [1, 200],\r\n    \"playbackMode\": \"stop\",\r\n    \"playMode\": \"constant\",\r\n    \"stepsNum\": 10,\r\n    \"exerciseTime\": 600,\r\n    \"bpmStepDropdownOpen\": false,\r\n    \"byTimeInterval\": 5,\r\n    \"byBarInterval\": 2,\r\n    \"constantBpmSlider\": 80,\r\n    \"track\": [\r\n        [0, 0, 0, 0],\r\n        [1, 0, 0, 0],\r\n        [0, 1, 1, 1],\r\n        [0, 0, 0, 0]\r\n    ],\r\n    \"timeSignature\": 4,\r\n    \"instrumentKey\": \"basicdrumkit\",\r\n    \"samples\": [\r\n        {\r\n            \"file\": \"Kick.wav\",\r\n            \"instrumentKey\": \"basicdrumkit\"\r\n        },\r\n        {\r\n            \"file\": \"Snare.wav\",\r\n            \"instrumentKey\": \"basicdrumkit\"\r\n        },\r\n        {\r\n            \"file\": \"ClosedHat.wav\",\r\n            \"instrumentKey\": \"basicdrumkit\"\r\n        },\r\n        {\r\n            \"file\": \"OpenHat.wav\",\r\n            \"instrumentKey\": \"basicdrumkit\"\r\n        }\r\n    ]\r\n}\r\n","const pl = {\r\n    /* App */\r\n    \"(shift) arrow up/down\": \"(shift) strzaki gra/d\",\r\n    \"higher/lower BPM\": \"zwiksz/zmniejsz BPM\",\r\n    \"arrow left/right\": \"strzaki lewa/prawa\",\r\n    \"previous/next step according to plan\": \"poprzedni/nastpny krok wg planu\",\r\n    \"start/stop\": \"zacznij/zatrzymaj\",\r\n    \"stop\": \"zatrzymaj\",\r\n\r\n    /* SoundMachine */\r\n    \"Control\": \"Kontrola\",\r\n    \"Start / Stop\": \"Zacznij / Zatrzymaj\",\r\n    \"Volume\": \"Gono\",\r\n    // \"Reverb\": \"Reverb\",\r\n    \"Instrument\": \"Instrument\",\r\n    \"Mode\": \"Tryb\",\r\n    \"Increase speed\": \"Zwikszaj prdko\",\r\n    \"BPM range\": \"Zakres BPM\",\r\n    \"By bar\": \"Co kilka taktw\",\r\n    \"bar\": \"takt\",\r\n    \"By time\": \"Co jaki czas\",\r\n    \"Set time\": \"W ustalonym czasie wicze\",\r\n    \"Constant\": \"Nie zwikszaj\",\r\n    \"Increase speed every\": \"Zwiksz prdko co\",\r\n    \"Number of steps\": \"Ilo krokw\",\r\n    \"Up and Down\": \"Szybciej i wolniej\",\r\n    \"Shuffle\": \"Losowo\",\r\n    \"Exercise Time\": \"Czas wiczenia\",\r\n    \"Total time:\": \"Cakowity czas:\",\r\n    \"Please select\": \"Prosz wybra\",\r\n    \"Select\": \"Wybierz\",\r\n    // \"BPM\": \"BPM\"\r\n\r\n    /* Planner */\r\n    \"Stop\": \"Zatrzymaj\",\r\n    \"Continue\": \"Kontynuuj\",\r\n    \"Repeat\": \"Od pocztku\",\r\n    \"After plan\": \"Po zakoczeniu\",\r\n    \"Step order\": \"Kolejno\",\r\n\r\n    \"Plan progress\": \"Postp planu\",\r\n    \"Step progress\": \"Postp kroku\",\r\n\r\n    /* Presets */\r\n    \"Title\": \"Nazwa\",\r\n    \"Save current settings\": \"Zapisz biece ustawienia\",\r\n    \"Edit\": \"Edytuj\",\r\n    \"User presets\": \"Zapisane ustawienia\",\r\n    \"Presets\": \"Presety\",\r\n    \"Delete\": \"Usu\",\r\n    \"Save Preset\": \"Zapisz Ustawienia\",\r\n    \"Cancel\": \"Anuluj\",\r\n    \"Are you sure?\": \"Czy aby na pewno?\",\r\n    \"Are you sure to delete current preset?\": \"Czy jeste pewien, e chcesz usun to ustawienie?\",\r\n    \"Save\": \"Zapisz\",\r\n    \"Polyrhythms\": \"Polirytmy\",\r\n    \"Basic\": \"Podstawowe\",\r\n    \"Drum Patterns\": \"Motywy perkusyjne\",\r\n    \"Afro-Cuban\": \"Afro-Kubaskie\",\r\n    \"Other\": \"Inne\",\r\n\r\n    /* Import Dialog */\r\n    \"Import Presets\": \"Wczytaj Presety\",\r\n    \"I can't read this file\": \"Nie potrafi odczyta tego pliku\",\r\n    \"Import from file\": \"Importuj z pliku\",\r\n    \"Export to file\": \"Eksportuj do pliku\",\r\n    \"Confirm\": \"Potwierd\",\r\n\r\n    /* TrackView */\r\n    \"Sequencer\": \"Sekwencer\",\r\n\r\n    /* Keyboard control panel */\r\n    \"Keyboard controls\": \"Skrty klawiszowe\",\r\n\r\n    /* Utils */\r\n\r\n    \"bars\": {\r\n        1: \"takt\",\r\n        2: \"takty\",\r\n        3: \"takty\",\r\n        4: \"takty\",\r\n        5: \"taktw\"\r\n    },\r\n\r\n    \"hours\": {\r\n        1: \"godzina\",\r\n        2: \"godziny\",\r\n        3: \"godziny\",\r\n        4: \"godziny\",\r\n        5: \"godzin\"\r\n    },\r\n\r\n    \"minutes\": {\r\n        1: \"minuta\",\r\n        2: \"minuty\",\r\n        3: \"minuty\",\r\n        4: \"minuty\",\r\n        5: \"minut\"\r\n    },\r\n\r\n    \"seconds\": {\r\n        1: \"sekunda\",\r\n        2: \"sekundy\",\r\n        3: \"sekundy\",\r\n        4: \"sekundy\",\r\n        5: \"sekund\"\r\n    },\r\n\r\n    \"hr\": \"godz.\",\r\n    \"hrs\": \"godz.\"\r\n}\r\n\r\nexport default pl;","const zh = {\r\n    \"Practice Timer\": \"\",\r\n    \"Minutes\": \"\",\r\n    \"Start\": \"\",\r\n    \"Pause\": \"\",\r\n    \"Reset\": \"\",\r\n    \"Resume\": \"\"\r\n};\r\n\r\nexport default zh;\r\n","import pl from '../localization/pl-pl'\r\nimport zh from '../localization/zh-cn'\r\n// import it from '../localization/it-it'\r\n\r\n// A bit rough attempt to i18n\r\nexport function GetNavigatorLanguage() {\r\n    return (navigator.languages && navigator.languages.length) ? navigator.languages[0] : navigator.userLanguage || navigator.language || navigator.browserLanguage || 'en';\r\n}\r\n\r\n// set language for the app\r\nlet locale;\r\nswitch ( GetNavigatorLanguage() )\r\n{\r\n    case 'pl':\r\n    case 'pl-PL':\r\n    case 'pl-pl':\r\n        locale = pl;\r\n        break;\r\n    case 'zh':\r\n    case 'zh-CN':\r\n    case 'zh-cn':\r\n    case 'zh-Hans':\r\n        locale = zh;\r\n        break;\r\n    default:\r\n        locale = {};    // this will default to en\r\n        break;\r\n}\r\n\r\nfunction Tr(text) {\r\n    if (locale[text]) {\r\n        return locale[text];\r\n    }\r\n    else {\r\n        return text;\r\n    }\r\n}\r\nexport default Tr;\r\n\r\nexport function TrRange(number, label) {\r\n    if (!locale[label]) {\r\n        return label\r\n    }\r\n    else if (locale[label][number]) {\r\n        return locale[label][number]\r\n    }\r\n    else {\r\n        const l =  locale[label];\r\n        // If it's not specified then return last defined term\r\n        // Bit dodgy, but should do the job.\r\n        return l[Object.keys(l)[Object.keys(l).length -1]]\r\n    }\r\n}\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport {Container} from 'reactstrap';\r\n\r\nclass SimpleProgress extends Component {\r\n    state = {  }\r\n    render() { \r\n        return ( <Container className=\"SimpleProgress\">\r\n            <div className=\"bar\" style={{width: this.props.value  + \"%\", display: 'block'}} />\r\n        </Container> );\r\n    }\r\n}\r\n \r\nexport default SimpleProgress;","import { TrRange, GetNavigatorLanguage } from './Locale'\r\n\r\nconst Utils = {\r\n\r\n\ttoLocaleDateTime: function (dateTime) {\r\n\t\t// safety\r\n\t\tif (!dateTime) return '';\r\n\r\n\t\t// go for it\r\n\t\treturn new Date(dateTime).toLocaleString(GetNavigatorLanguage(), {\r\n\t\t\tdateStyle: \"long\",\r\n\t\t\ttimeStyle: \"short\"\r\n\t\t});\r\n\r\n\t},\r\n\r\n\tpadTime: function (t) {\r\n\t\treturn t < 10 ? \"0\" + t : t;\r\n\t},\r\n\r\n\tformatTime: function (timeInSeconds) {\r\n\t\tif (timeInSeconds) {\r\n\t\t\treturn Utils.formatTimeFull(timeInSeconds, 'h', 'm', 's', true);\r\n\t\t}\r\n\t},\r\n\r\n\tformatTimeLong: function (timeInSeconds) {\r\n\t\tif (timeInSeconds) {\r\n\t\t\treturn Utils.formatTimeFull(timeInSeconds, 'hours', 'minutes', 'seconds', false);\r\n\t\t}\r\n\t},\r\n\r\n\tformatTimeFull: function (timeInSeconds, hLabel, mLabel, sLabel, usePad) {\r\n\t\tlet t = new Date(0, 0, 0, 0, 0, 0, 0);\r\n\t\tt.setSeconds(timeInSeconds);\r\n\t\tconst h = t.getHours();\r\n\t\tconst m = t.getMinutes();\r\n\t\tconst s = t.getSeconds();\r\n\r\n\t\tlet o = \"\";\r\n\r\n\t\tif (h !== 0) {\r\n\t\t\to += h + ' ' + TrRange(h, hLabel) + \" \";\r\n\t\t}\r\n\r\n\t\tif (m !== 0 || h !== 0) {\r\n\t\t\tif (h !== 0 && m !== 0) {\r\n\t\t\t\to += (usePad ? Utils.padTime(m) : m) + ' ' + TrRange(m, mLabel) + \" \";\r\n\t\t\t}\r\n\t\t\telse if (m !== 0) {\r\n\t\t\t\to += (usePad ? Utils.padTime(m) : m) + ' ' + TrRange(m, mLabel) + \" \";\r\n\t\t\t}\r\n\t\t\tif (s !== 0) {\r\n\t\t\t\to += \"\" + (usePad ? Utils.padTime(s) : s) + ' ' + TrRange(s, sLabel)\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\to += t.getSeconds() + ' ' + TrRange(s, sLabel)\r\n\t\t}\r\n\t\treturn o.trim();\r\n\t},\r\n\r\n\tstorageAvailable: function (type) {\r\n\t\tvar storage;\r\n\t\ttry {\r\n\t\t\tstorage = window[type];\r\n\t\t\tvar x = '__storage_test__';\r\n\t\t\tstorage.setItem(x, x);\r\n\t\t\tstorage.removeItem(x);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tcatch (e) {\r\n\t\t\treturn e instanceof DOMException && (\r\n\t\t\t\t// everything except Firefox\r\n\t\t\t\te.code === 22 ||\r\n\t\t\t\t// Firefox\r\n\t\t\t\te.code === 1014 ||\r\n\t\t\t\t// test name field too, because code might not be present\r\n\t\t\t\t// everything except Firefox\r\n\t\t\t\te.name === 'QuotaExceededError' ||\r\n\t\t\t\t// Firefox\r\n\t\t\t\te.name === 'NS_ERROR_DOM_QUOTA_REACHED') &&\r\n\t\t\t\t// acknowledge QuotaExceededError only if there's something already stored\r\n\t\t\t\t(storage && storage.length !== 0);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Utils;","import React, { Component } from \"react\";\r\nimport Tone from 'tone'\r\nimport Tr, { TrRange } from './Locale'\r\nimport { Collapse, ButtonGroup, Button } from \"reactstrap\";\r\nimport SimplePanel from \"./SimplePanel\"\r\nimport { PlayModes } from \"./PlayModes\";\r\nimport { PlaybackModes } from \"./PlaybackModes\";\r\nimport SimpleProgress from \"./SimpleProgress\";\r\nimport Utils from \"./Utils\";\r\nimport { InitPreset } from \"./PresetsLib\";\r\n\r\n// import Control from \"./Control\"\r\nclass Planner extends Component {\r\n\tstate = {\r\n\t\tplaybackMode: this.props.playbackMode,\r\n\t\tplayMode: this.props.playMode,\r\n\t\tsteps: [],\r\n\t\tcurrentStepIdx: this.props.currentStepIdx,\r\n\t\tstepProgress: 0,\r\n\t\tplanProgress: 0,\r\n\t\tisUpDown: false,\r\n\t\tisPaused: false\r\n\t};\r\n\r\n\tmakePlan(s) {\r\n\t\tlet segments = [];\r\n\t\t// some helpful variables\r\n\t\tconst max = s.bpmRange[1];\r\n\t\tlet bpm = s.bpmRange[0];\r\n\r\n\t\tif (s.playMode === PlayModes.BY_BAR) {\r\n\t\t\twhile (bpm <= max) {\r\n\t\t\t\tconst segment = {\r\n\t\t\t\t\tbpm: bpm,\r\n\t\t\t\t\tduration: s.byBarInterval\r\n\t\t\t\t};\r\n\t\t\t\tsegments.push(segment);\r\n\t\t\t\tbpm += s.bpmStep;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (s.playMode === PlayModes.BY_TIME) {\r\n\t\t\twhile (bpm <= max) {\r\n\t\t\t\tconst segment = {\r\n\t\t\t\t\tduration: s.byTimeInterval,\r\n\t\t\t\t\tbpm: bpm\r\n\t\t\t\t};\r\n\t\t\t\tsegments.push(segment);\r\n\t\t\t\tbpm += s.bpmStep;\r\n\t\t\t}\r\n\t\t} else if (s.playMode === PlayModes.CONSTANT) {\r\n\t\t\tconst segment = {\r\n\t\t\t\tduration: Infinity,\r\n\t\t\t\tbpm: s.constantBpmSlider\r\n\t\t\t};\r\n\t\t\tsegments.push(segment);\r\n\t\t}\r\n\t\telse if (s.playMode === PlayModes.SET_TIME) {\r\n\r\n\t\t\tconst duration = s.exerciseTime / (s.stepsNum);\r\n\r\n\t\t\tlet bpm = s.bpmRange[0];\r\n\t\t\tconst bpmStep = (s.bpmRange[1] - s.bpmRange[0]) / (s.stepsNum - 1);\r\n\t\t\t// we compare against max+1 as there might be some fractions that will make last step ignored\r\n\t\t\twhile (bpm <= max + 1) {\r\n\t\t\t\tconst segment = {\r\n\t\t\t\t\tduration: duration,\r\n\t\t\t\t\tbpm: bpm\r\n\t\t\t\t};\r\n\t\t\t\tsegments.push(segment);\r\n\t\t\t\tbpm += bpmStep;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.state.isUpDown) {\r\n\t\t\tconst rev = segments.slice().reverse();\r\n\t\t\trev.shift()\r\n\t\t\tsegments = segments.concat(rev);\r\n\t\t}\r\n\t\tif (this.state.isRandom) {\r\n\t\t\tsegments = this.shuffle(segments.slice())\r\n\t\t}\r\n\t\treturn segments;\r\n\t}\r\n\r\n\tshuffle(array) {\r\n\t\tvar currentIndex = array.length, temporaryValue, randomIndex;\r\n\r\n\t\t// While there remain elements to shuffle...\r\n\t\twhile (0 !== currentIndex) {\r\n\r\n\t\t\t// Pick a remaining element...\r\n\t\t\trandomIndex = Math.floor(Math.random() * currentIndex);\r\n\t\t\tcurrentIndex -= 1;\r\n\r\n\t\t\t// And swap it with the current element.\r\n\t\t\ttemporaryValue = array[currentIndex];\r\n\t\t\tarray[currentIndex] = array[randomIndex];\r\n\t\t\tarray[randomIndex] = temporaryValue;\r\n\t\t}\r\n\r\n\t\treturn array;\r\n\t}\r\n\r\n\tonPlanStep(idx) {\r\n\t\tthis.setState({ currentStepIdx: idx }, this.stepChanged)\r\n\t}\r\n\r\n\tupdateProgress() {\r\n\t\tconst step = this.getStep(this.state.currentStepIdx);\r\n\t\tconst stepProgress = (this.props.transport.ticks - step.startTimeTicks) / (Tone.Time(step.duration).toTicks());\r\n\t\tconst planProgress = this.props.transport.ticks / this.endTime;\r\n\t\tthis.setState({ stepProgress: this.clamp(stepProgress), planProgress: this.clamp(planProgress) })\r\n\t}\r\n\r\n\tclamp(value, min = 0, max = 1) {\r\n\t\treturn Math.min(Math.max(value, min), max);\r\n\t}\r\n\r\n\tsetPlan(config, stepIdx = 0) {\r\n\t\tconst plan = this.makePlan(config);\r\n\t\tthis.baseBpm = this.props.transport.bpm.value\r\n\r\n\t\tconst timeSignature = config.timeSignature;\r\n\t\tlet t = 0;\r\n\t\tthis.events = [];\r\n\t\tlet steps = []\r\n\t\tlet totalPlanTime = 0;\r\n\r\n\t\tfor (let i = 0; i < plan.length; i++) {\r\n\t\t\tconst s = plan[i];\r\n\t\t\tconst beatDuration = 60 / s.bpm;\r\n\r\n\t\t\t// create  step end event\r\n\t\t\tthis.props.transport.schedule((time) => this.onPlanStep(i), t)\r\n\r\n\t\t\tconst duration = config.playMode === PlayModes.BY_BAR ? beatDuration * timeSignature * s.duration : s.duration;\r\n\t\t\tconst durationInBars = config.playMode === PlayModes.BY_BAR ? s.duration : s.duration / (beatDuration * timeSignature);\r\n\r\n\t\t\tconst bar = {\r\n\t\t\t\tbpm: s.bpm,\r\n\t\t\t\tduration: duration,\r\n\t\t\t\tdurationBars: durationInBars.toFixed(1),\r\n\t\t\t\tdurationFormatted: Utils.formatTime(duration),\r\n\t\t\t\tstepIdx: i,\r\n\t\t\t\ttrack: config.track,\r\n\t\t\t\tplayMode: s.playMode,\r\n\t\t\t\tstartTimeTicks: Tone.Time(t).toTicks()\r\n\t\t\t};\r\n\r\n\r\n\t\t\tswitch (config.playMode) {\r\n\t\t\t\tcase PlayModes.BY_TIME:\r\n\t\t\t\tcase PlayModes.SET_TIME:\r\n\t\t\t\t\tt += this.calcTimeForBpm(s.duration, s.bpm);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase PlayModes.BY_BAR:\r\n\t\t\t\t\tt = s.duration * (i + 1) + \"m\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase PlayModes.CONSTANT:\r\n\t\t\t\t\tt = Infinity\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthrow new Error('Invalid playMode: ' + config.playMode)\r\n\t\t\t}\r\n\r\n\t\t\ttotalPlanTime += duration\r\n\t\t\tsteps.push(bar);\r\n\r\n\t\t}\r\n\r\n\t\tthis.props.transport.schedule((time) => this.onPlanEnd(time), t);\r\n\t\tthis.endTime = Tone.Time(t).toTicks();\r\n\r\n\t\tthis.setState(\r\n\t\t\tprevState => ({\r\n\t\t\t\ttotalPlanTime: totalPlanTime,\r\n\t\t\t\t// hmm this is shit as change in currentStepIdx doesn't move transport, this needs some thinking \r\n\t\t\t\tcurrentStepIdx: 0,\r\n\t\t\t\tsteps: steps,\r\n\t\t\t\tplayMode: config.playMode\r\n\t\t\t}),\r\n\t\t\tthis.stepChanged\r\n\t\t);\r\n\t}\r\n\r\n\tcalcTimeForBpm(seconds, bpm) {\r\n\t\treturn Tone.Time(seconds * bpm / this.baseBpm);\r\n\r\n\t}\r\n\r\n\tstartStep(stepIdx) {\r\n\t\tif (this.state.currentStepIdx !== stepIdx) {\r\n\t\t\tconst s = this.getStep(stepIdx);\r\n\t\t\tthis.props.transport.ticks = s.startTimeTicks;\r\n\t\t\tthis.setState({ currentStepIdx: stepIdx }, this.stepChanged)\r\n\t\t}\r\n\t}\r\n\r\n\tgetStep(idx) {\r\n\t\treturn this.state.steps[idx];\r\n\t}\r\n\r\n\tstepForward() {\r\n\t\t// check if we're not at the end of plan\r\n\t\tif (this.state.currentStepIdx + 1 < this.state.steps.length) {\r\n\t\t\tthis.startStep(this.state.currentStepIdx + 1)\r\n\t\t}\r\n\t}\r\n\r\n\tstepBackward() {\r\n\t\tif (this.state.currentStepIdx - 1 >= 0) {\r\n\t\t\tthis.startStep(this.state.currentStepIdx - 1)\r\n\t\t}\r\n\t}\r\n\r\n\tonPlanEnd(time) {\r\n\t\tif (this.state.playbackMode === PlaybackModes.STOP) {\r\n\t\t\tthis.props.onPlanEnd();\r\n\t\t}\r\n\t\telse if (this.state.playbackMode === PlaybackModes.REPEAT) {\r\n\t\t\tthis.startStep(0)\r\n\t\t}\r\n\t}\r\n\tstepChanged() {\r\n\t\tconst bpm = this.getCurrentStep().bpm\r\n\t\tthis.props.onPlanStep(bpm)\r\n\t}\r\n\r\n\tgetCurrentStep() {\r\n\t\tif (this.state.currentStepIdx >= this.state.steps.length) {\r\n\t\t\tthrow new Error(\"Trying to get step that doesn't exists\");\r\n\t\t}\r\n\t\treturn this.state.steps[this.state.currentStepIdx];\r\n\t}\r\n\r\n\tonPlaybackChange(newPlaybackMode) {\r\n\t\tthis.setState({ playbackMode: newPlaybackMode }, this.props.onChange);\r\n\t}\r\n\r\n\tbarRender = b => {\r\n\t\tconst cls = this.state.currentStepIdx === b.stepIdx ? \"current-step\" : \"\";\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tonClick={() => this.startStep(b.stepIdx)}\r\n\t\t\t\tclassName={\"step clickable \" + cls}\r\n\t\t\t\tkey={\"key_\" + b.stepIdx}\r\n\t\t\t>\r\n\t\t\t\t{\r\n\t\t\t\t\tb.duration !== Infinity\r\n\t\t\t\t\t\t? <>{b.durationFormatted} ({b.durationBars} {TrRange(Math.floor(b.durationBars), \"bars\")}) </>\r\n\t\t\t\t\t\t: ''}\r\n\t\t\t\t@ {b.bpm.toFixed(0)} bpm\r\n\t\t\t</div>\r\n\t\t);\r\n\t};\r\n\r\n\tonUpDownBtn() {\r\n\t\tthis.setState({ isUpDown: !this.state.isUpDown, isRandom: false }, this.props.onChange)\r\n\t}\r\n\r\n\tonRandomBtn() {\r\n\t\tthis.setState({ isRandom: !this.state.isRandom, isUpDown: false }, this.props.onChange)\r\n\t}\r\n\trender() {\r\n\t\tif (this.state.playMode === PlayModes.CONSTANT) {\r\n\t\t\treturn <div />\r\n\t\t}\r\n\t\treturn (\r\n\r\n\t\t\t<SimplePanel title={\"Plan\"}>\r\n\t\t\t\t<div className=\"Planner\">\r\n\t\t\t\t\t{/* <div>Next step in {this.state.stepProgress.toFixed(1)} seconds</div> */}\r\n\t\t\t\t\t<div>{Tr(\"Step progress\")} <SimpleProgress value={this.state.stepProgress * 100} /></div>\r\n\t\t\t\t\t<div>{Tr(\"Plan progress\")} <SimpleProgress value={this.state.planProgress * 100} /></div>\r\n\r\n\t\t\t\t\t{/* <Button onClick={() => this.togglePause()}>\r\n\t\t\t\t\tisPaused:\r\n\t\t\t\t\t{this.state.isPaused === true ? \"paused\" : \"normal\"}\r\n\t\t\t\t</Button> */}\r\n\r\n\t\t\t\t\t<div style={{ height: '200px', overflow: 'auto' }}>\r\n\t\t\t\t\t\t{this.state.steps.map(bar => this.barRender(bar))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{Tr(\"Total time:\")} {Utils.formatTime(this.state.totalPlanTime)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Collapse isOpen={this.state.playMode !== PlayModes.CONSTANT}>\r\n\t\t\t\t\t<div>{Tr(\"After plan\")}</div>\r\n\t\t\t\t\t<ButtonGroup size=\"sm\">\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\toutline\r\n\t\t\t\t\t\t\tonClick={() => this.onPlaybackChange(PlaybackModes.STOP)}\r\n\t\t\t\t\t\t\tactive={this.state.playbackMode === PlaybackModes.STOP}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{Tr(\"Stop\")}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\toutline\r\n\t\t\t\t\t\t\tonClick={() => this.onPlaybackChange(PlaybackModes.CONTINUE)}\r\n\t\t\t\t\t\t\tactive={this.state.playbackMode === PlaybackModes.CONTINUE}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{Tr(\"Continue\")}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\toutline\r\n\t\t\t\t\t\t\tonClick={() => this.onPlaybackChange(PlaybackModes.REPEAT)}\r\n\t\t\t\t\t\t\tactive={this.state.playbackMode === PlaybackModes.REPEAT}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{Tr(\"Repeat\")}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</ButtonGroup>\r\n\t\t\t\t\t<div>{Tr(\"Step order\")}</div>\r\n\t\t\t\t\t<ButtonGroup>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\toutline\r\n\t\t\t\t\t\t\tonClick={(e) => this.onUpDownBtn(e)}\r\n\t\t\t\t\t\t\tactive={this.state.isUpDown}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{Tr(\"Up and Down\")}\r\n\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\toutline\r\n\t\t\t\t\t\t\t// toggle\r\n\t\t\t\t\t\t\tonClick={() => this.onRandomBtn()}\r\n\t\t\t\t\t\t\tactive={this.state.isRandom}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{Tr(\"Shuffle\")}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</ButtonGroup>\r\n\t\t\t\t</Collapse>\r\n\r\n\t\t\t</SimplePanel>\r\n\r\n\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Planner;\r\n\r\nPlanner.defaultProps = {\r\n\tplaybackMode: InitPreset.playbackMode,\r\n\tplayMode: InitPreset.playMode,\r\n\tonChange: () => { },\r\n\tonPlanStep: () => { },\r\n\tonPlanEnd: () => { },\r\n\tcurrentStepIdx: NaN\r\n};\r\n","import React, { Component } from \"react\";\r\nimport {\r\n\tInput,\r\n\tButton,\r\n\tModal,\r\n\tModalHeader,\r\n\tModalBody,\r\n\tModalFooter\r\n} from \"reactstrap\";\r\nimport Tr from \"./Locale\"\r\n\r\nclass EditPresetModal extends Component {\r\n\tstate = {\r\n\t\tmodal: false,\r\n\t\tnestedModal: false,\r\n\t\tpreset: null,\r\n\t\tpresetId: null,\r\n\t\tshowDelete: false\r\n\t};\r\n\r\n\ttoggle = () => {\r\n\t\tthis.setState(prevState => ({\r\n\t\t\tmodal: !prevState.modal,\r\n\t\t\tnestedModal: false\r\n\t\t}));\r\n\t}\r\n\r\n\ttoggleNested = () => {\r\n\t\tthis.setState({ nestedModal: !this.state.nestedModal })\r\n\t}\r\n\r\n\r\n\thandleSave() {\r\n\t\tconst preset = this.state.preset;\r\n\t\tconst title = this.state.preset.title;\r\n\t\tif (title && title.length > 0) {\r\n\t\t\tthis.props.onSave(title, preset);\r\n\t\t\tthis.toggle();\r\n\t\t}\r\n\t}\r\n\r\n\tedit(preset, presetId, title) {\r\n\r\n\t\t// preset = {...presetId};\r\n\t\tif (presetId && title) {\r\n\t\t\tpreset.presetId = presetId;\r\n\t\t\tpreset.title = title;\r\n\r\n\t\t}\r\n\t\t// debugger;\r\n\t\tthis.setState(\r\n\t\t\t{\r\n\t\t\t\tpreset: preset,\r\n\t\t\t\tshowDelete: presetId ? true : false\r\n\t\t\t},\r\n\t\t\tthis.toggle\r\n\t\t);\r\n\t}\r\n\r\n\ttitleChanged(e) {\r\n\t\tconst newTitle = e.target.value;\r\n\t\tlet preset = { ...this.state.preset };\r\n\t\tpreset.title = newTitle;\r\n\t\tthis.setState({ preset });\r\n\t}\r\n\r\n\thandleDelete() {\r\n\t\tthis.props.onDeleteBtn(this.state.preset);\r\n\t\tthis.toggle();\r\n\t}\r\n\r\n\trenderDelete() {\r\n\t\tif (this.state.showDelete === true) {\r\n\t\t\treturn (\r\n\t\t\t\t<Button color=\"warning\" onClick={this.toggleNested}>{Tr(\"Delete\")}</Button>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tstyle={{ marginTop: '0.5em' }}\r\n\t\t\t\t\toutline\r\n\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\tcolor=\"light\"\r\n\t\t\t\t\tonClick={this.props.onSaveBtn}\r\n\t\t\t\t>\r\n\t\t\t\t\t{Tr(\"Save current settings\")}\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Modal\r\n\t\t\t\t\tisOpen={this.state.modal}\r\n\t\t\t\t\ttoggle={this.toggle}\r\n\t\t\t\t\tclassName={this.props.className}\r\n\t\t\t\t>\r\n\t\t\t\t\t<ModalHeader toggle={this.toggle}>{Tr(\"Save Preset\")}</ModalHeader>\r\n\t\t\t\t\t<ModalBody>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\tonChange={e => this.titleChanged(e)}\r\n\t\t\t\t\t\t\tplaceholder={Tr(\"Title\")}\r\n\t\t\t\t\t\t\tdefaultValue={\r\n\t\t\t\t\t\t\t\t(this.state.preset &&\r\n\t\t\t\t\t\t\t\t\tthis.state.preset.title) ||\r\n\t\t\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{/* <div className=\"code\">\r\n\t\t\t\t\t\t\t{JSON.stringify(this.state.preset)}\r\n\t\t\t\t\t\t</div> */}\r\n\t\t\t\t\t\t<Modal isOpen={this.state.nestedModal} toggle={this.toggleNested}>\r\n\t\t\t\t\t\t\t<ModalHeader toggle={this.toggleNested}>{Tr(\"Are you sure?\")}</ModalHeader>\r\n\t\t\t\t\t\t\t<ModalBody>{Tr(\"Are you sure to delete current preset?\")}</ModalBody>\r\n\t\t\t\t\t\t\t<ModalFooter>\r\n\t\t\t\t\t\t\t\t<Button color=\"warning\" onClick={() => this.handleDelete()}>{Tr(\"Delete\")}</Button>\r\n\t\t\t\t\t\t\t\t<Button onClick={this.toggleNested}>{Tr(\"Cancel\")}</Button>\r\n\t\t\t\t\t\t\t</ModalFooter>\r\n\t\t\t\t\t\t</Modal>\r\n\t\t\t\t\t</ModalBody>\r\n\t\t\t\t\t<ModalFooter>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tonClick={() => this.handleSave()}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{Tr(\"Save\")}\r\n\t\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t\t\t<Button color=\"secondary\" onClick={this.toggle}>\r\n\t\t\t\t\t\t\t{Tr(\"Cancel\")}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t{this.renderDelete()}\r\n\t\t\t\t\t</ModalFooter>\r\n\t\t\t\t</Modal>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default EditPresetModal;\r\n\r\n\r\nEditPresetModal.defaultProps = {\r\n\tonDeleteBtn: function (preset) { },\r\n\tonSave: function (title, preset) { },\r\n\tonSaveBtn: function (e, idx) { }\r\n};","import React, { Component } from \"react\";\r\nimport {\r\n    Input,\r\n    Button,\r\n    Modal,\r\n    ModalHeader,\r\n    ModalBody,\r\n    ModalFooter,\r\n    Alert\r\n} from \"reactstrap\";\r\nimport Tr from \"./Locale\"\r\n\r\nclass ImportDialog extends Component {\r\n    state = {\r\n        modal: false,\r\n        showInvalidFileAlert: false\r\n    };\r\n\r\n    toggle = () => {\r\n        this.setState(prevState => ({\r\n            modal: !prevState.modal\r\n        }));\r\n    }\r\n\r\n    open() {\r\n        this.toggle();\r\n    }\r\n\r\n    close() {\r\n        this.setState({modal: false, showInvalidFileAlert: false})\r\n    }\r\n\r\n    onPresetsLoaded(e) {\r\n        try {\r\n            let json = JSON.parse(e.target.result);\r\n            this.setState({showInvalidFileAlert: false})\r\n            this.props.onJsonReady(json);                \r\n        }\r\n        catch (e) {\r\n            this.setState({showInvalidFileAlert: true})\r\n        }\r\n    }\r\n\r\n\r\n    onUploadBtn(e) {\r\n        var reader = new FileReader();\r\n        reader.onload = (reader) => this.onPresetsLoaded(reader);\r\n        reader.readAsText(e.target.files[0]);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <Button\r\n                    style={{ marginTop: '0.5em' }}\r\n                    outline\r\n                    size=\"sm\"\r\n                    color=\"light\"\r\n                    onClick={this.props.onImportBtn}\r\n                >\r\n                    {Tr(\"Import from file\")}\r\n                </Button>\r\n                <Modal\r\n                    isOpen={this.state.modal}\r\n                    toggle={this.toggle}\r\n                    className={this.props.className}\r\n                >\r\n                    <ModalHeader toggle={this.toggle}>{Tr(\"Import Presets\")}</ModalHeader>\r\n                    <ModalBody>\r\n                        <Input type='file' onChange={(e) => this.onUploadBtn(e)} />\r\n                        <Alert hidden={!this.state.showInvalidFileAlert} color=\"danger\">\r\n                            {Tr(\"I can't read this file\")}\r\n                        </Alert>\r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                        <Button color=\"secondary\" onClick={this.toggle}>\r\n                            {Tr(\"Cancel\")}\r\n                        </Button>\r\n                    </ModalFooter>\r\n                </Modal>\r\n            </>\r\n        );\r\n    }\r\n}\r\nexport default ImportDialog;\r\n\r\n\r\nImportDialog.defaultProps = {\r\n\tonJsonReady: function () { }\r\n};\r\n","\r\nconst ColorThemes = {\r\n    'ambient' : {\r\n        3: '#FF6355',\r\n        2: '#E1537F',\r\n        1: '#AC5696',\r\n        0: '#705A94'\r\n        // 1: '#40557B',\r\n        // 0: '#2F4858'\r\n    },\r\n    'blueish' : {\r\n        0: '#D1D2F9',\r\n        1: '#A3BCF9',\r\n        2: '#7796CB',\r\n        3: '#576490'\r\n    },\r\n    'rainbow': {\r\n        0: '#FF715B',\r\n        1: '#F9CB40',\r\n        2: '#BCED09',\r\n        3: '#2F52E0'\r\n    }\r\n}\r\n\r\nconst Config = {\r\n    TRACKS_NUMBER: 4,\r\n    MAXIMUM_TIMESIGNATURE: 24,\r\n    MIN_BPM: 1,\r\n    MAX_BPM: 200,\r\n    PROGRESS_UPDATE_FPS: 30, // TODO: Set this according to device. higher values might cause slower devices to stutter\r\n    COLOR_PALETTE: ColorThemes['rainbow']\r\n}\r\nexport default Config;\r\n\r\n\r\n// old \r\n// 0: '#ff6355',\r\n// \t1: '#ff7155',\r\n// \t2: '#ff8055',\r\n// \t3: '#ff8e55',\r\n// \t4: '#ff9955',\r\n// \t5: '#ff9c55',\r\n// \t6: '#ffaa55'","import React, { Component } from \"react\";\r\nimport { Button, Container, Row, Col } from \"reactstrap\";\r\nimport EditPresetModal from \"./EditPresetModal\"\r\nimport ImportDialog from \"./ImportDialog\"\r\nimport { PresetsLib, InitPreset } from './PresetsLib'\r\nimport { Samples } from \"./Instruments\"\r\nimport Tr from './Locale'\r\nimport SimplePanel from \"./SimplePanel\";\r\nimport Utils from \"./Utils\"\r\nimport Config from \"./Config\";\r\n\r\nclass PresetsManager extends Component {\r\n\tstate = {\r\n\t\tshowDelete: [],\r\n\t\tshowEdit: [],\r\n\t\tuserPresets: []\r\n\t};\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tconst storedPresets = localStorage.getItem('userPresets');\r\n\t\tthis.state.userPresets = storedPresets ? JSON.parse(storedPresets) : [];\r\n\r\n\t\tthis.state.showDelete = this.state.userPresets ? Array(this.state.userPresets.length).fill(false) : []\r\n\t\tthis.state.showEdit = this.state.userPresets ? Array(this.state.userPresets.length).fill(false) : []\r\n\t}\r\n\r\n\t// Old version of app didn't use certain properties.\r\n\t// If user did store some ancient presets in cookie this will make it work again\r\n\tvalidatePreset(preset) {\r\n\r\n\t\tpreset.byBarInterval = preset.byBarInterval || preset.interval || InitPreset.byBarInterval;\r\n\t\tpreset.byTimeInterval = preset.byTimeInterval || preset.interval || InitPreset.byTimeInterval;\r\n\t\t// change from accents into track\r\n\t\tif (!preset.track) {\r\n\t\t\tlet track = [];\r\n\t\t\tpreset.accents.map(item => {\r\n\t\t\t\ttrack.push([item])\r\n\t\t\t\t// expected te return value in arrow function\r\n\t\t\t\treturn true;\r\n\t\t\t})\r\n\t\t\tpreset.track = track;\r\n\t\t}\r\n\r\n\r\n\t\t// if no timeSignature then we're dealing with tracks made before polyrythm support. Fix them now.\r\n\t\tif (!preset.timeSignature) {\r\n\t\t\tconst timeSignature = preset.track.length\r\n\t\t\tpreset.timeSignature = timeSignature\r\n\r\n\t\t\tvar track = new Array(Config.TRACKS_NUMBER).fill(0).map(x => new Array(timeSignature).fill(0));\r\n\r\n\r\n\t\t\tfor (let beatIdx = 0; beatIdx < preset.track.length; beatIdx++) {\r\n\t\t\t\tconst beats = preset.track[beatIdx];\r\n\t\t\t\tfor (let beat = 0; beat < beats.length; beat++) {\r\n\t\t\t\t\ttrack[beats[beat]][beatIdx] = 1;\t// set volume to one, effectively enabling it\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tpreset.track = track;\r\n\t\t}\r\n\r\n\t\tif (!preset.samples) {\r\n\t\t\tpreset.samples = this.convertInstrumentKeyToSamples(preset.instrumentKey)\r\n\t\t}\r\n\r\n\t\treturn preset;\r\n\t}\r\n\r\n\tconvertInstrumentKeyToSamples(instrumentKey) {\r\n\t\t// desired result: \"samples\": [{instrumentKey: 'tabla', file: 'dha-slide.wav' }, {instrumentKey: 'electrokit', file: 'Kick.wav'}, {instrumentKey: 'metronome', file: 'tap.wav'}],\r\n\t\tconst samples = Samples.filter(el => el.instrumentKey === instrumentKey);\r\n\t\treturn samples;\r\n\t}\r\n\r\n\tonPresetClick(preset) {\r\n\t\tthis.props.onSelect(this.validatePreset(preset));\r\n\t}\r\n\r\n\tonSavePreset(title, o) {\r\n\t\tconst preset = { title: title, ...o }\r\n\r\n\t\t// if it's got presetId then overwrite preset with such id\r\n\t\t// if no presetId then create it here\r\n\t\tif (preset.presetId === undefined) {\r\n\t\t\tlet presetId = 1;\r\n\t\t\tif (this.state.userPresets.length > 0) {\r\n\t\t\t\t// find max and add 1\r\n\t\t\t\tpresetId = Math.max.apply(Math, this.state.userPresets.map(function (p) { return p.presetId; }));\r\n\t\t\t\tpresetId++\r\n\t\t\t}\r\n\r\n\t\t\t// assign id\r\n\t\t\tpreset.presetId = presetId;\r\n\t\t}\r\n\r\n\r\n\t\t// update date\r\n\t\tpreset.savedDtm = new Date();\r\n\r\n\t\tlet userPresets = this.state.userPresets;\r\n\r\n\t\t// if (!userPresets) {\r\n\t\t// \tuserPresets = [];\r\n\t\t// }\r\n\r\n\t\t// overwrite by presetId\r\n\t\tlet idx = this.state.userPresets.findIndex(o => o.presetId === preset.presetId);\r\n\r\n\t\tif (idx < 0) {\r\n\t\t\tuserPresets.push(preset)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tuserPresets[idx] = preset;\r\n\t\t}\r\n\r\n\r\n\t\tthis.saveInLocalStorage(userPresets);\r\n\t\t// window.localStorage.setItem(preset.title, preset);\r\n\t}\r\n\r\n\tsaveInLocalStorage(presets) {\r\n\t\tlocalStorage.setItem('userPresets', JSON.stringify(presets))\r\n\t\tthis.setState({ userPresets: presets })\r\n\t}\r\n\r\n\tshowDeleteBtn(e, idx) {\r\n\t\tlet showDelete = { ...this.state };\r\n\t\tshowDelete[idx] = true;\r\n\t\tthis.setState({ showDelete });\r\n\t}\r\n\r\n\tshowEditBtn(e, idx, presetId) {\r\n\t\tlet showEdit = { ...this.state };\r\n\t\tshowEdit[idx] = true;\r\n\t\tthis.setState({ showEdit });\r\n\t}\r\n\thideEditBtn(e) {\r\n\t\tthis.setState({ showEdit: false })\r\n\t}\r\n\r\n\tonPresetDelete(preset) {\r\n\t\tlet idx = this.state.userPresets.findIndex(o => o.presetId === preset.presetId);\r\n\t\tlet newPresets = this.state.userPresets.slice();\r\n\r\n\t\t// let idx = this.state.userPresets.indexOf(preset)\r\n\t\tif (idx < 0) {\r\n\t\t\tthrow new Error(\"Selected preset \" + preset.title + \" has not been found in the store\")\r\n\t\t}\r\n\r\n\t\t// remove preset\r\n\t\tnewPresets.splice(idx, 1);\r\n\t\tthis.saveInLocalStorage(newPresets);\r\n\t}\r\n\r\n\tonPresetEdit(e, idx) {\r\n\t\tvar p = this.props.getPreset();\r\n\r\n\t\tif (idx !== undefined) {\r\n\r\n\t\t\tthis.refs.presetEditor.edit(p, this.state.userPresets[idx].presetId, this.state.userPresets[idx].title)\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.refs.presetEditor.edit(p)\r\n\t\t}\r\n\t}\r\n\r\n\tonImportBtn(e) {\r\n\t\tthis.refs.importDialog.open()\r\n\t}\r\n\r\n\trenderUserPresets(userPresets) {\r\n\t\tif (userPresets.length === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t{Tr(\"User presets\")}:\r\n\t\t\t\t</Row>\r\n\t\t\t\t{userPresets.map((item, idx) => (\r\n\t\t\t\t\t<Row className=\"presetItem clickable\"\r\n\t\t\t\t\t\tonClick={() => this.onPresetClick(item)}\r\n\t\t\t\t\t\tkey={\"preset_\" + idx}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Col style={{ textAlign: 'left' }} >\r\n\t\t\t\t\t\t\t{item.title}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col xs=\"auto\" className=\"userPresetSavedDtm\">\r\n\t\t\t\t\t\t\t{Utils.toLocaleDateTime(item.savedDtm)}\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Button size=\"sm\" outline\r\n\t\t\t\t\t\t\t\tonClick={(e) => this.onPresetEdit(e, idx)}>\r\n\t\t\t\t\t\t\t\t{Tr(\"Edit\")}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t{/* // <div className='editBtn clickable' onClick={(e) =>}></div> */}\r\n\t\t\t\t\t</Row>\r\n\r\n\t\t\t\t))}\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\tonExport() {\r\n\r\n\t\tconst a = document.createElement('a');\r\n\t\tconst file = new Blob([JSON.stringify(this.state.userPresets)], { type: 'application/json' });\r\n\t\ta.href = URL.createObjectURL(file);\r\n\t\ta.download = 'presets.json';\r\n\t\ta.click();\r\n\t}\r\n\r\n\tonPresetsImport(presets) {\r\n\t\tpresets.forEach(p => {\r\n\t\t\tp = this.validatePreset(p);\r\n\t\t\t// unset presetId so we won't overwrite anything that's there already\r\n\t\t\tp.presetId = undefined\r\n\t\t\tthis.onSavePreset(p.title, p);\r\n\t\t})\r\n\t\t\r\n\t\tthis.refs.importDialog.close();\r\n\t\t// onSavePreset(preset.title, presets)\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst userPresetsJson = localStorage.getItem('userPresets');\r\n\t\tlet userPresets = userPresetsJson ? JSON.parse(userPresetsJson) : [];\r\n\r\n\t\treturn (\r\n\t\t\t<SimplePanel className=\"PresetsManager\" title={Tr(\"Presets\")}>\r\n\t\t\t\t<Container>\r\n\t\t\t\t\t{PresetsLib.map((item, idx) => {\r\n\t\t\t\t\t\tif (item.isHeader) {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Row\r\n\t\t\t\t\t\t\t\t\tclassName={\"presetHeader\"}\r\n\t\t\t\t\t\t\t\t\tkey={\"header_\" + idx}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{Tr(item.title)}:\r\n\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Row\r\n\t\t\t\t\t\t\t\t\tonClick={() => this.onPresetClick(item)}\r\n\t\t\t\t\t\t\t\t\tclassName={\"presetItem clickable\"}\r\n\t\t\t\t\t\t\t\t\tkey={\"preset_\" + idx}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{item.title}\r\n\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})}\r\n\t\t\t\t\t{this.renderUserPresets(userPresets)}\r\n\t\t\t\t\t{/* center button */}\r\n\t\t\t\t\t<Row style={{ justifyContent: 'center' }}>\r\n\t\t\t\t\t\t<EditPresetModal ref='presetEditor' onDeleteBtn={(preset) => this.onPresetDelete(preset)} onSaveBtn={(e, idx) => this.onPresetEdit(e, idx)} onSave={(title, preset) => this.onSavePreset(title, preset)} />\r\n\t\t\t\t\t\t<ImportDialog ref='importDialog' onImportBtn={() => this.onImportBtn()} onJsonReady={(presets) => this.onPresetsImport(presets)}/>\r\n\t\t\t\t\t\t<Button style={{ marginTop: '0.5em' }} outline  size=\"sm\" color=\"light\" onClick={() => this.onExport()}>{Tr(\"Export to file\")}</Button>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Container>\r\n\t\t\t</SimplePanel>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default PresetsManager;\r\n\r\nPresetsManager.defaultProps = {\r\n\tonSelect: function (preset) { }\r\n};\r\n","import React, { Component } from \"react\";\r\nimport SimplePanel from \"./SimplePanel\";\r\nimport { Row, Col, Button, Input, InputGroup, InputGroupAddon } from \"reactstrap\";\r\nimport Tr from \"./Locale\";\r\n\r\nclass PracticeTimer extends Component {\r\n\tstate = {\r\n\t\tminutes: 5,\r\n\t\tsecondsRemaining: 0,\r\n\t\tisRunning: false,\r\n\t\tisPaused: false\r\n\t};\r\n\r\n\ttimerId = null;\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.clearTimer();\r\n\t}\r\n\r\n\tclearTimer() {\r\n\t\tif (this.timerId) {\r\n\t\t\tclearInterval(this.timerId);\r\n\t\t\tthis.timerId = null;\r\n\t\t}\r\n\t}\r\n\r\n\ttick = () => {\r\n\t\tconst { secondsRemaining } = this.state;\r\n\t\tif (secondsRemaining <= 1) {\r\n\t\t\tthis.clearTimer();\r\n\t\t\tthis.setState({ secondsRemaining: 0, isRunning: false, isPaused: false });\r\n\t\t\tthis.props.onTimeUp && this.props.onTimeUp();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setState({ secondsRemaining: secondsRemaining - 1 });\r\n\t};\r\n\r\n\thandleStart = () => {\r\n\t\tconst minutes = Math.max(1, Math.min(99, parseInt(this.state.minutes, 10) || 5));\r\n\t\tthis.setState({\r\n\t\t\tminutes,\r\n\t\t\tsecondsRemaining: this.state.isRunning ? this.state.secondsRemaining : minutes * 60,\r\n\t\t\tisRunning: true,\r\n\t\t\tisPaused: false\r\n\t\t}, () => {\r\n\t\t\tif (this.timerId) return;\r\n\t\t\tthis.timerId = setInterval(this.tick, 1000);\r\n\t\t});\r\n\t};\r\n\r\n\thandlePause = () => {\r\n\t\tthis.clearTimer();\r\n\t\tthis.setState({ isPaused: true });\r\n\t};\r\n\r\n\thandleResume = () => {\r\n\t\tif (!this.state.isRunning || this.state.secondsRemaining <= 0) return;\r\n\t\tthis.timerId = setInterval(this.tick, 1000);\r\n\t\tthis.setState({ isPaused: false });\r\n\t};\r\n\r\n\thandleReset = () => {\r\n\t\tthis.clearTimer();\r\n\t\tconst minutes = Math.max(1, Math.min(99, parseInt(this.state.minutes, 10) || 5));\r\n\t\tthis.setState({\r\n\t\t\tminutes,\r\n\t\t\tsecondsRemaining: minutes * 60,\r\n\t\t\tisRunning: false,\r\n\t\t\tisPaused: false\r\n\t\t});\r\n\t};\r\n\r\n\tonMinutesChange = (e) => {\r\n\t\tconst v = e.target.value;\r\n\t\tif (v === \"\" || /^\\d{1,2}$/.test(v)) {\r\n\t\t\tthis.setState({ minutes: v === \"\" ? \"\" : parseInt(v, 10) });\r\n\t\t}\r\n\t};\r\n\r\n\tformatTime(seconds) {\r\n\t\tconst m = Math.floor(seconds / 60);\r\n\t\tconst s = seconds % 60;\r\n\t\treturn `${m}:${s < 10 ? \"0\" : \"\"}${s}`;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { minutes, secondsRemaining, isRunning, isPaused } = this.state;\r\n\t\tconst displaySeconds = isRunning || isPaused ? secondsRemaining : (parseInt(minutes, 10) || 5) * 60;\r\n\r\n\t\treturn (\r\n\t\t\t<SimplePanel title={Tr(\"Practice Timer\")} className=\"PracticeTimer\">\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<label className=\"mr-2\">{Tr(\"Minutes\")}</label>\r\n\t\t\t\t\t\t<InputGroup className=\"mb-2\">\r\n\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tmin={1}\r\n\t\t\t\t\t\t\t\tmax={99}\r\n\t\t\t\t\t\t\t\tvalue={minutes === \"\" ? \"\" : minutes}\r\n\t\t\t\t\t\t\t\tonChange={this.onMinutesChange}\r\n\t\t\t\t\t\t\t\tdisabled={isRunning && !isPaused}\r\n\t\t\t\t\t\t\t\tplaceholder=\"5\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<InputGroupAddon addonType=\"append\">min</InputGroupAddon>\r\n\t\t\t\t\t\t</InputGroup>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<div className=\"mb-2 font-weight-bold\" style={{ fontSize: \"1.25rem\" }}>\r\n\t\t\t\t\t\t\t{this.formatTime(displaySeconds)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t<div className=\"d-flex flex-wrap\">\r\n\t\t\t\t\t\t\t{!isRunning ? (\r\n\t\t\t\t\t\t\t\t<Button color=\"success\" size=\"sm\" className=\"mr-1 mb-1\" onClick={this.handleStart}>\r\n\t\t\t\t\t\t\t\t\t{Tr(\"Start\")}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t) : isPaused ? (\r\n\t\t\t\t\t\t\t\t<Button color=\"warning\" size=\"sm\" className=\"mr-1 mb-1\" onClick={this.handleResume}>\r\n\t\t\t\t\t\t\t\t\t{Tr(\"Resume\")}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<Button color=\"warning\" size=\"sm\" className=\"mr-1 mb-1\" onClick={this.handlePause}>\r\n\t\t\t\t\t\t\t\t\t{Tr(\"Pause\")}\r\n\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t<Button color=\"secondary\" size=\"sm\" className=\"mb-1\" onClick={this.handleReset}>\r\n\t\t\t\t\t\t\t\t{Tr(\"Reset\")}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Col>\r\n\t\t\t\t</Row>\r\n\t\t\t</SimplePanel>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default PracticeTimer;\r\n","import React, { Component } from 'react';\r\n// import { accentColor } from './AccentTypes';\r\nimport { InitPreset } from './PresetsLib'\r\nimport Config from './Config';\r\n\r\nclass SvgClock extends Component {\r\n    state = {\r\n        track: this.props.track,\r\n        timeSignature: this.props.timeSignature\r\n    }\r\n    colorEmpty = \"#333\";\r\n    strokeColor = \"#444\";\r\n    strokeWidth = \"0.001em\"\r\n\r\n    setAccents(track) {\r\n        this.setState({ track: track })\r\n        // this.drawSvg()\r\n    }\r\n\r\n    getCoordinatesForPercent(percent, r = 1) {\r\n        const x = r * Math.cos(2 * Math.PI * percent);\r\n        const y = r * Math.sin(2 * Math.PI * percent);\r\n        return [x, y];\r\n    }\r\n\r\n    drawSlices(radius, trackIdx) {\r\n        // Drawing pie charts by David Gilbertson, taken from https://medium.com/hackernoon/a-simple-pie-chart-in-svg-dbdd653b6936\r\n        // if (this.props.track[trackIdx] === undefined) {\r\n        //     // debugger\r\n        // }\r\n        let pctStep = 1 / this.props.track[trackIdx].length;\r\n        let slices = [];\r\n        // let step = pctStep;\r\n        this.props.track[trackIdx].forEach((volume, subIdx) => {\r\n            slices.push({ percent: pctStep, color: volume > 0 ? Config.COLOR_PALETTE[trackIdx] : this.colorEmpty });\r\n\r\n            // if (trackColumn > 0)\r\n\r\n            // step += pctStep;\r\n        })\r\n        let cumulativePercent = 0;\r\n\r\n        let paths = [];\r\n        slices.forEach((slice, idx) => {\r\n            // destructuring assignment sets the two variables at once\r\n            const [startX, startY] = this.getCoordinatesForPercent(cumulativePercent, radius);\r\n\r\n            // each slice starts where the last slice ended, so keep a cumulative percent\r\n            cumulativePercent += slice.percent;\r\n\r\n            const [endX, endY] = this.getCoordinatesForPercent(cumulativePercent, radius);\r\n\r\n            // if the slice is more than 50%, take the large arc (the long way around)\r\n            const largeArcFlag = slice.percent > .5 ? 1 : 0;\r\n\r\n            // create an array and join it just for code readability\r\n            const pathData = [\r\n                `M ${startX} ${startY}`, // Move\r\n                `A ${radius} ${radius} 0 ${largeArcFlag} 1 ${endX} ${endY}`, // Arc\r\n                `L 0 0`, // Line\r\n            ].join(' ');\r\n\r\n            // create a <path> and append it to the <svg> element\r\n            paths.push(\r\n                <path key={\"pie_\" + idx} d={pathData} fill={slice.color} stroke={this.strokeColor} strokeWidth={this.strokeWidth} />\r\n            )\r\n        });\r\n        return paths\r\n    }\r\n\r\n    // OLD_drawSlices(radius, filter) {\r\n    //     // Drawing pie charts by David Gilbertson, taken from https://medium.com/hackernoon/a-simple-pie-chart-in-svg-dbdd653b6936\r\n    //     let pctStep = 1 / this.props.track.length;\r\n    //     let slices = [];\r\n    //     // let step = pctStep;\r\n    //     this.props.track.forEach(trackColumn => {\r\n    //         const idx = trackColumn.indexOf(filter);\r\n    //         slices.push({ percent: pctStep, color: idx >= 0 ? accentColor[filter] : this.colorEmpty });\r\n    //         // step += pctStep;\r\n    //     })\r\n    //     let cumulativePercent = 0;\r\n\r\n    //     let paths = [];\r\n    //     slices.forEach((slice, idx) => {\r\n    //         // destructuring assignment sets the two variables at once\r\n    //         const [startX, startY] = this.getCoordinatesForPercent(cumulativePercent, radius);\r\n\r\n    //         // each slice starts where the last slice ended, so keep a cumulative percent\r\n    //         cumulativePercent += slice.percent;\r\n\r\n    //         const [endX, endY] = this.getCoordinatesForPercent(cumulativePercent, radius);\r\n\r\n    //         // if the slice is more than 50%, take the large arc (the long way around)\r\n    //         const largeArcFlag = slice.percent > .5 ? 1 : 0;\r\n\r\n    //         // create an array and join it just for code readability\r\n    //         const pathData = [\r\n    //             `M ${startX} ${startY}`, // Move\r\n    //             `A ${radius} ${radius} 0 ${largeArcFlag} 1 ${endX} ${endY}`, // Arc\r\n    //             `L 0 0`, // Line\r\n    //         ].join(' ');\r\n\r\n    //         // create a <path> and append it to the <svg> element\r\n    //         paths.push(\r\n    //             <path key={\"pie_\" + idx} d={pathData} fill={slice.color} stroke={this.strokeColor} strokeWidth={this.strokeWidth}  />\r\n    //         )\r\n    //     });\r\n    //     return paths\r\n    // }\r\n\r\n    drawText() {\r\n        let labels = [];\r\n        const pctStep = 1 / this.props.timeSignature;\r\n        let cumulativePercent = 0;\r\n\r\n        for (let i = 0; i < this.props.timeSignature; i++) {\r\n\r\n            let [x, y] = this.getCoordinatesForPercent(cumulativePercent, 0.9);\r\n            // tweak position of labels\r\n            x -= 0.06\r\n            labels.push(\r\n                <text x={x} y={y} key={\"label_\" + i} textAnchor=\"middle\" transform={\"rotate(90, \" + x + \", \" + y + \")\"} className=\"svgText\">{i + 1}</text>\r\n            )\r\n            cumulativePercent += pctStep\r\n        }\r\n\r\n        return <g>{labels}</g>;\r\n    }\r\n\r\n    setProgress(progress) {\r\n        this.line.style.transform = 'rotate(' + progress * 360 + 'deg)'\r\n    }\r\n    render() {\r\n        let radiusIncrement = 0.5 / Config.TRACKS_NUMBER;\r\n\r\n        let circles = [];\r\n\r\n        for (let i = 0; i < this.props.track.length; i++) {\r\n            // main circles\r\n            circles.push(this.drawSlices(0.8 - radiusIncrement * i, i));\r\n        }\r\n        // inner gray circle\r\n        circles.push(\r\n            <circle key=\"innerCircle\" cx=\"0\" cy=\"0\" r={0.8 - radiusIncrement * Config.TRACKS_NUMBER} fill={this.colorEmpty} stroke={this.strokeColor} strokeWidth={this.strokeWidth} />\r\n        )\r\n\r\n        return (\r\n            <div ref={el => (this.container = el)} className=\"visClockContainer\">\r\n                <svg viewBox=\"-1 -1 2 2\" ref={el => (this.svg = el)}>\r\n                    <g style={{ transform: 'rotate(-90deg)' }}>\r\n                        {\r\n                            circles\r\n                        }\r\n                        {this.drawText()}\r\n                        <line ref={el => (this.line = el)} strokeLinecap=\"round\" x1=\"0\" y1=\"0\" x2=\".7\" y2=\"0\" stroke=\"rgba(255,255,255,0.5)\" strokeWidth=\"0.1\" style={{ transform: 'rotate(' + this.props.partProgress * 360 + 'deg)' }} />\r\n                    </g>\r\n                </svg>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default SvgClock;\r\n\r\nSvgClock.defaultProps = {\r\n    track: InitPreset.track,\r\n    timeSignature: InitPreset.timeSignature\r\n}","import React, { Component } from 'react';\r\nimport Slider from 'rc-slider'\r\nimport regression from 'regression';\r\nimport { Badge, Button } from 'reactstrap'\r\n\r\n\r\nclass GeometricSlider extends Component {\r\n    state = {\r\n        value: this.props.defaultValue,\r\n        regression: undefined\r\n    };\r\n\r\n    constructor(props) {\r\n        // TODO:  \r\n        // currently it works only for min=1 only\r\n        super(props);\r\n\r\n        const d = [[0, this.props.min], [100, this.props.max]];\r\n\r\n        this.state.regression = regression.exponential(d, { precision: 10 })\r\n\r\n        this.prepareMarks();\r\n\r\n        this.state.value = this.props.defaultValue;\r\n\r\n        this.state.btnStep = props.btnStep || 1;\r\n    }\r\n\r\n    onMinusClick = () => {\r\n        const newValue = this.state.value - this.state.btnStep;\r\n        this.setState({ value: newValue }, this.props.onChange(newValue))\r\n    }\r\n\r\n    onPlusClick = () => {\r\n        const newValue = this.state.value + this.state.btnStep;\r\n        this.setState({ value: newValue }, this.props.onChange(newValue))\r\n    }\r\n\r\n\r\n    prepareMarks() {\r\n        this.marks = {};\r\n\r\n        for (let i = 0; i < this.props.marksAt.length; i++) {\r\n            this.marks[this.findX(this.props.marksAt[i])] = this.props.marksAt[i];\r\n        }\r\n    }\r\n\r\n    onChange(v) {\r\n        const value = Math.floor(this.state.regression.predict(v)[1]);\r\n        this.setState({ value: value })\r\n        this.props.onChange(value)\r\n    }\r\n\r\n    findX(y) {\r\n        // y = e^bx ==> x = ln(y) / b\r\n        return Math.log(y) / this.state.regression.equation[1];\r\n    }\r\n\r\n    setValue(v) {\r\n        this.setState({ value: v })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div>\r\n                    <Button size=\"sm\" outline className=\"inlineBtn\" onClick={this.onMinusClick}>-</Button>\r\n                    <Badge color=\"light\" onClick={this.onBadgeClick} className=\"d-i\">\r\n                        {this.props.badgeFormatter(this.state.value)}\r\n                    </Badge>\r\n                    <Button size=\"sm\" outline className=\"inlineBtn\" onClick={this.onPlusClick}>+</Button>\r\n                </div>\r\n                <Slider ref=\"slider\" included={false} value={this.findX(this.state.value)} style={{ height: '45px' }} onChange={(v) => this.onChange(v)} min={0} max={100} step={0.5} marks={this.marks} />\r\n            </>\r\n        )\r\n\r\n    }\r\n\r\n}\r\n\r\nexport default GeometricSlider;\r\n\r\nGeometricSlider.defaultProps = {\r\n    marksNum: 6,\r\n    marksStyle: {\r\n        color: '#ccc'\r\n    },\r\n    desc: '',\r\n    badgeFormatter: function (v) { return v; },\r\n    markFormatter: function (v) { return v; },\r\n    marksAt: []\r\n}","import React, { Component } from \"react\";\r\nimport {\r\n    Input,\r\n    Button,\r\n    Modal,\r\n    ModalBody,\r\n    ModalFooter,\r\n    InputGroup,\r\n    InputGroupAddon,\r\n    Alert\r\n} from \"reactstrap\";\r\nimport Tr from \"../Locale\"\r\n\r\nclass RangeEditInPlace extends Component {\r\n    state = {\r\n        modal: false,\r\n        value: this.props.value,\r\n        showInvalidRange: false\r\n    };\r\n\r\n    open() {\r\n        this.setState({ modal: true, value: this.props.value, showInvalidRange: false })\r\n    }\r\n\r\n    close() {\r\n        this.setState({ modal: false })\r\n    }\r\n\r\n    onOk() {\r\n        if (this.state.value.min >= this.state.value.max) {\r\n            this.setState({ showInvalidRange: true })\r\n            return\r\n        }\r\n        this.props.onChange(this.state.value)\r\n        this.close();\r\n\r\n    }\r\n\r\n    onMinValueChange(e) {\r\n        let v = Number(e.target.value);\r\n\r\n        let value = this.state.value;\r\n        value.min = v;\r\n        this.setState({ value: value })\r\n    }\r\n\r\n    onMaxValueChange(e) {\r\n        let v = Number(e.target.value);\r\n\r\n        let value = this.state.value;\r\n        value.max = v;\r\n        this.setState({ value: value })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n\r\n                <Modal\r\n                    isOpen={this.state.modal}\r\n                    className={this.props.className}\r\n                >\r\n                    <ModalBody>\r\n                        <InputGroup>\r\n                            <InputGroupAddon addonType=\"prepend\">{Tr(\"From\")}</InputGroupAddon>\r\n                            <Input min={this.props.min} max={this.props.max} type=\"number\" value={this.state.value.min} onChange={(e) => this.onMinValueChange(e)} step=\"1\" />\r\n                        </InputGroup>\r\n                        <InputGroup>\r\n                            <InputGroupAddon addonType=\"prepend\">{Tr(\"To\")}</InputGroupAddon>\r\n                            <Input min={this.props.min} max={this.props.max} type=\"number\" value={this.state.value.max} onChange={(e) => this.onMaxValueChange(e)} step=\"1\" />\r\n                        </InputGroup>\r\n                        <Alert hidden={!this.state.showInvalidRange} color=\"danger\">\r\n                            {Tr(\"Invalid range!\")}\r\n                        </Alert>\r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                        <Button color=\"secondary\" onClick={() => this.onOk()}>\r\n                            {Tr(\"OK\")}\r\n                        </Button>\r\n\r\n                        <Button color=\"secondary\" onClick={() => this.close()}>\r\n                            {Tr(\"Cancel\")}\r\n                        </Button>\r\n                    </ModalFooter>\r\n                </Modal>\r\n            </>\r\n        );\r\n    }\r\n}\r\nexport default RangeEditInPlace;\r\n\r\nRangeEditInPlace.defaultProps = {\r\n    onChange: function () { },\r\n    title: ''\r\n};\r\n","import React from \"react\";\r\nimport { Range } from \"rc-slider\";\r\nimport { Badge } from \"reactstrap\";\r\nimport RangeEditInPlace from \"./RangeEditInPlace\";\r\n\r\nclass AdvancedRange extends Range {\r\n\tonBadgeClick() {\r\n\t\tthis.refs.editor.open();\r\n\t}\r\n\r\n\tonEdit(v) {\r\n\t\tthis.setState({ bounds: [v.min, v.max] }, () => this.props.onAfterChange(this.state.bounds))\r\n\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Badge\r\n\t\t\t\t\t\tcolor=\"light\"\r\n\t\t\t\t\t\tonClick={this.props.editInPlace ? () => this.onBadgeClick() : function () { }}\r\n\t\t\t\t\t\tclassName={this.props.editInPlace ? \"clickable\" : ''}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{this.state.bounds[0]} - {this.state.bounds[1]}\r\n\t\t\t\t\t</Badge>\r\n\t\t\t\t\t<RangeEditInPlace\r\n\t\t\t\t\t\tref={\"editor\"}\r\n\t\t\t\t\t\ttitle={this.props.title}\r\n\t\t\t\t\t\tvalue={{ min: this.state.bounds[0], max: this.state.bounds[1] }}\r\n\t\t\t\t\t\tmin={this.props.min}\r\n\t\t\t\t\t\tmax={this.props.max}\r\n\t\t\t\t\t\tonChange={(v) => this.onEdit(v)} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ height: \"30px\" }}>\r\n\t\t\t\t\t{super.render()}\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default AdvancedRange;\r\n\r\n// inherit props from base class\r\nAdvancedRange.defaultProps = Object.assign({}, Range.defaultProps, {\r\n\teditInPlace: false,\r\n\ttitle: ''\r\n});","import React, { Component } from \"react\";\r\nimport {\r\n    Input,\r\n    Button,\r\n    Modal,\r\n    ModalBody,\r\n    ModalFooter,\r\n    InputGroup,\r\n    InputGroupAddon,\r\n} from \"reactstrap\";\r\nimport Tr from \"./../Locale\"\r\n\r\nclass EditInPlace extends Component {\r\n    state = {\r\n        modal: false,\r\n        value: this.props.value\r\n    };\r\n\r\n    open() {\r\n        this.setState({modal: true, value: this.props.value})\r\n    }\r\n\r\n    close() {\r\n        this.setState({ modal: false })\r\n    }\r\n\r\n    onOk() {\r\n        this.props.onChange(this.state.value)\r\n        this.close();\r\n    }\r\n\r\n    onValueChange(e, v) {\r\n        let val = Number(e.target.value);\r\n        this.setState({ value: val })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <Modal\r\n                    isOpen={this.state.modal}\r\n                    className={this.props.className}\r\n                >\r\n                    <ModalBody>\r\n                        <InputGroup>\r\n                            <InputGroupAddon addonType=\"prepend\">{this.props.title}</InputGroupAddon>\r\n                            <Input min={this.props.min} max={this.props.max} type=\"number\" value={this.state.value} onChange={(e) => this.onValueChange(e)} step=\"1\" />\r\n                        </InputGroup>\r\n                    </ModalBody>\r\n                    <ModalFooter>\r\n                        <Button color=\"secondary\" onClick={() => this.onOk()}>\r\n                            {Tr(\"OK\")}\r\n                        </Button>\r\n\r\n                        <Button color=\"secondary\" onClick={() => this.close()}>\r\n                            {Tr(\"Cancel\")}\r\n                        </Button>\r\n                    </ModalFooter>\r\n                </Modal>\r\n            </>\r\n        );\r\n    }\r\n}\r\nexport default EditInPlace;\r\n\r\n\r\nEditInPlace.defaultProps = {\r\n    onChange: function () { },\r\n    title: ''\r\n};\r\n","import React from \"react\";\r\nimport Slider from \"rc-slider\";\r\nimport { Badge, Button } from \"reactstrap\";\r\nimport EditInPlace from \"./EditInPlace\"\r\n\r\nclass AdvancedSlider extends Slider {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.state.btnStep = props.btnStep || 1;\r\n\t}\r\n\tonMinusClick = () => {\r\n\t\tconst newValue = this.state.value - this.state.btnStep;\r\n\t\tthis.setState({ value: newValue }, this.props.onChange(newValue))\r\n\t}\r\n\r\n\tonPlusClick = () => {\r\n\t\tconst newValue = this.state.value + this.state.btnStep;\r\n\t\tthis.setState({ value: newValue }, this.props.onChange(newValue))\r\n\t}\r\n\r\n\tonEdit(value) {\r\n\t\tif (value >= this.props.min && value <= this.props.max) {\r\n\t\t\tthis.setState({ value: value }, this.props.onChange(value));\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<div className=\"advancedSlider\">\r\n\t\t\t\t\t{this.props.disableBtns === true ? '' : <Button size=\"sm\" outline className=\"inlineBtn\" onClick={this.onMinusClick}>-</Button>}\r\n\t\t\t\t\t<Badge\r\n\t\t\t\t\t\tonClick={this.props.editInPlace ? (e) => this.onBadgeClick(e) : function(){}}\r\n\t\t\t\t\t\tcolor=\"light\"\r\n\t\t\t\t\t\tclassName={this.props.editInPlace? \"clickable\" : ''}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{this.state.value}\r\n\t\t\t\t\t\t{/* {this.props.badgeFormatter(this.state.value)} */}\r\n\t\t\t\t\t</Badge>\r\n\t\t\t\t\t{this.props.editInPlace ? <EditInPlace ref={\"editor\"} title={this.props.title} value={this.state.value} min={this.props.min} max={this.props.max} onChange={(v) => this.onEdit(v)} /> : ''}\r\n\t\t\t\t\t{this.props.disableBtns === true ? '' : <Button size=\"sm\" outline className=\"inlineBtn\" onClick={this.onPlusClick}>+</Button>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ height: \"30px\" }}>\r\n\t\t\t\t\t<div>{super.render()}</div>\r\n\t\t\t\t</div>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\tonBadgeClick(e) {\r\n\t\tif (this.refs.editor) {\r\n\t\t\tthis.refs.editor.open();\r\n\t\t}\r\n\t\t// TODO attach editorInPlace\r\n\t}\r\n}\r\n\r\nexport default AdvancedSlider;\r\n\r\n// inherit props from base class\r\nAdvancedSlider.defaultProps = Object.assign({}, Slider.defaultProps, {\r\n\teditInPlace: false,\r\n\ttitle: ''\r\n});","import React, { Component } from \"react\";\r\nimport Slider from \"rc-slider\";\r\nimport { Badge } from \"reactstrap\";\r\n\r\nclass DiscreteSlider extends Component {\r\n\r\n    state = {\r\n        value: undefined,\r\n        innerValue: 0\r\n    }\r\n\r\n    constructor(props) {\r\n\r\n        super(props);\r\n        // helpful to display marks properly (need to be an object)\r\n        this.state.innerMarks = {};\r\n        Object.values(this.props.marks).map((el, idx)  => {\r\n            this.state.innerMarks[idx] = {label: el.label};\r\n            return true;\r\n        })\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        // TODO: apply this componentDidUpdate to remaining custom sliders\r\n        var value = this.props.value;\r\n        var theValue = value !== undefined ? value : prevState.value;\r\n        var innerValue = Object.keys(this.props.marks).indexOf(theValue+ '');\r\n        \r\n        if ( innerValue !== prevState.innerValue) {\r\n            this.setState({innerValue: innerValue, value: value});\r\n        }\r\n    }\r\n\r\n    onSliderChange(sliderValue) {\r\n        const value = Object.values(this.props.marks)[sliderValue].value;\r\n        this.setState({ innerValue: sliderValue, value: value })\r\n        this.props.onChange(value)\r\n    }\r\n\r\n    \r\n    render() {\r\n        return (\r\n            <>\r\n                <div>\r\n                    <Badge\r\n                        color=\"light\"\r\n                        className=\"d-i\"\r\n                    >\r\n                        {this.props.badgeFormatter(this.state.value)}\r\n                    </Badge>\r\n                </div>\r\n                {/* render it slightly narrower so we fit marks which usually falls outside the container */}\r\n                <div style={{ height: \"3.5em\", width: '95%', margin: 'auto', whiteSpace: 'nowrap' }}>\r\n                    <Slider ref=\"slider\"\r\n                        included={false}\r\n                        value={this.state.innerValue}\r\n                        style={{ height: '3.5em' }}\r\n                        onChange={(v) => this.onSliderChange(v)}\r\n                        min={0}\r\n                        max={Object.keys(this.props.marks).length - 1}\r\n                        step={1}\r\n                        marks={this.state.innerMarks} />\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default DiscreteSlider;\r\n\r\n\r\nDiscreteSlider.defaultProps = {\r\n    badgeFormatter: function (v) { return v; },\r\n    markFormatter: function (v) { return v; },\r\n    defaultValue: 0\r\n}","import React, { Component } from \"react\";\r\nimport SimplePanel from \"./SimplePanel\";\r\nimport {\r\n\tButtonGroup,\r\n\tButton,\r\n\tCollapse,\r\n\tButtonDropdown,\r\n\tDropdownToggle,\r\n\tDropdownItem,\r\n\tDropdownMenu\r\n} from \"reactstrap\";\r\nimport { PlayModes } from \"./PlayModes\";\r\nimport GeometricSlider from \"./Sliders/GeometricSlider\";\r\nimport AdvancedRange from \"./Sliders/AdvancedRange\"\r\nimport AdvancedSlider from \"./Sliders/AdvancedSlider\"\r\nimport DiscreteSlider from \"./Sliders/DiscreteSlider\"\r\nimport Utils from \"./Utils\";\r\nimport { InitPreset } from \"./PresetsLib\";\r\nimport Tr, { TrRange } from \"./Locale\"\r\nimport Config from \"./Config\";\r\nclass ModePanel extends Component {\r\n\tstate = {\r\n\t\tbpmStep: this.props.bpmStep,\r\n\t\tbpmRange: this.props.bpmRange,\r\n\t\t// currentBpm: this.props.bpmRange[0],\r\n\t\tplaybackMode: this.props.playbackMode,\r\n\t\tplayMode: this.props.playMode,\r\n\t\tstepsNum: this.props.stepsNum,\r\n\t\texerciseTime: this.props.exerciseTime,\r\n\t\tbpmStepDropdownOpen: false,\r\n\t\tbyTimeInterval: this.props.byTimeInterval,\r\n\t\tbyBarInterval: this.props.byBarInterval,\r\n\t\tconstantBpmSlider: this.props.constantBpmSlider\r\n\t}\r\n\r\n\tonAfterChange(e) {\r\n\t\tthis.props.onChange()\r\n\t}\r\n\r\n\tonModeChange(newMode) {\r\n\r\n\t\tlet newState = {...this.state};\r\n\r\n\t\t// maintain current bpm when changing to CONSTANT playmode\r\n\t\tif (newMode === PlayModes.CONSTANT && newMode !== this.state.playMode) {\r\n\t\t\tnewState.constantBpmSlider =  this.props.transport.bpm.value;\r\n\t\t}\r\n\t\tnewState.playMode = newMode;\r\n\t\tthis.setState(newState, this.onAfterChange);\r\n\t}\r\n\r\n\r\n\r\n\tonBpmRangeChange(bpmRange) {\r\n\t\tthis.setState({ bpmRange: bpmRange }, this.onAfterChange);\r\n\t}\r\n\r\n\tonBpmSliderChange = (value) => {\r\n\t\tthis.setState({ constantBpmSlider: value }, this.onAfterChange);\r\n\t}\r\n\r\n\tonBpmStepChange() {\r\n\t\tthis.setState(prevState => ({\r\n\t\t\tbpmStepDropdownOpen: !prevState.bpmStepDropdownOpen\r\n\t\t}));\r\n\t}\r\n\r\n\tonBpmStepSelect(value) {\r\n\t\tthis.setState({ bpmStep: value }, this.onAfterChange);\r\n\t}\r\n\r\n\tsetValue(o) {\r\n\t\tthis.refs.byBarSlider.setValue(o.byBarInterval || InitPreset.byBarInterval)\r\n\t\tthis.refs.byTimeSlider.setValue(o.byTimeInterval || InitPreset.byTimeInterval)\r\n\t\t// this.refs.exerciseTimeSlider.setValue(o.exerciseTime || InitPreset.exerciseTime);\r\n\r\n\t\tthis.refs.bpmRange.setState({ bounds: o.bpmRange })\r\n\t\tthis.setState(\r\n\t\t\t{\r\n\t\t\t\tplayMode: o.playMode,\r\n\t\t\t\tplaybackMode: o.playbackMode || this.state.playbackMode,\r\n\t\t\t\tbpmStep: o.bpmStep,\r\n\t\t\t\texerciseTime: o.exerciseTime || this.state.exerciseTime,\r\n\t\t\t\tstepsNum: o.stepsNum || this.state.stepsNum,\r\n\t\t\t\tbyBarInterval: o.byBarInterval,// || this.state.byBarInterval,\r\n\t\t\t\tbyTimeInterval: o.byTimeInterval, //|| this.state.byTimeInterval,\r\n\t\t\t\tbpmRange: o.bpmRange,\r\n\r\n\t\t\t\tconstantBpmSlider: o.constantBpmSlider || this.state.constantBpmSlider\r\n\r\n\t\t\t},\r\n\t\t\tthis.onAfterChange\r\n\t\t);\r\n\r\n\t}\r\n\r\n\tonTimeIntervalChange(v) {\r\n\t\tthis.setState({ byTimeInterval: v, interval: v }, this.onAfterChange);\r\n\t}\r\n\r\n\tonBarIntervalChange(v) {\r\n\t\tthis.setState({ byBarInterval: v, interval: v }, this.onAfterChange);\r\n\t}\r\n\r\n\tbyBarFormatter(barsNum) {\r\n\t\treturn barsNum + \" \" + TrRange(barsNum, \"bars\");\r\n\t}\r\n\r\n\trenderIncreaseBpmDropdown() {\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<ButtonDropdown\r\n\t\t\t\t\tstyle={{ margin: \"0px 5px\" }}\r\n\t\t\t\t\tisOpen={this.state.bpmStepDropdownOpen}\r\n\t\t\t\t\ttoggle={() => this.onBpmStepChange()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<DropdownToggle caret size=\"sm\" outline color=\"light\">\r\n\t\t\t\t\t\t{this.state.bpmStep}\r\n\t\t\t\t\t</DropdownToggle>\r\n\t\t\t\t\t<DropdownMenu>\r\n\t\t\t\t\t\t{[1,2,3,5,10,15,20,30,50,100].map(el => {\r\n\t\t\t\t\t\t\treturn <DropdownItem key={\"bpm_\"+el} onClick={() => {this.onBpmStepSelect(el)}}>{el}</DropdownItem>\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\t</DropdownMenu>\r\n\t\t\t\t</ButtonDropdown>\r\n\t\t\t\tbpm\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\tonStepsSliderChange(value) {\r\n\t\tthis.setState({ stepsNum: value }, this.onAfterChange);\r\n\t}\r\n\r\n\tonExerciseTimeSliderChange(value) {\r\n\t\tthis.setState({ exerciseTime: value }, this.onAfterChange);\r\n\t}\r\n\r\n\r\n\r\n\trenderTimeSlider() {\r\n\t\tconst marks = {}\r\n\t\tconst mArr = [300,600,900,1200,1800,3600,7200,10800]\r\n\r\n\t\tmArr.map(el => {\r\n\t\t\tmarks[el] = {value: el, label: Utils.formatTime(el)};\r\n\t\t\treturn true;\r\n\t\t});\r\n\t\treturn (<div>\r\n\t\t\t{Tr(\"Exercise Time\")}\r\n\t\t\t<DiscreteSlider\r\n\t\t\t\tref=\"exerciseTimeSlider\"\r\n\t\t\t\tbadgeFormatter={Utils.formatTimeLong}\r\n\t\t\t\tmarkFormatter={Utils.formatTime}\r\n\t\t\t\tmarks={marks}\r\n\t\t\t\tvalue={this.state.exerciseTime}\r\n\t\t\t\tonChange={(value) => this.onExerciseTimeSliderChange(value)}\r\n\t\t\t/>\r\n\r\n\t\t</div>);\r\n\t}\r\n\r\n\trenderStepsSlider() {\r\n\t\treturn (<div>\r\n\t\t\t{Tr(\"Number of steps\")}\r\n\t\t\t<AdvancedSlider\r\n\t\t\t\tref=\"stepsSlider\"\r\n\t\t\t\tmin={2}\r\n\t\t\t\tincluded={false}\r\n\t\t\t\tmax={100}\r\n\t\t\t\tmarks={{ 1: '1', 5: '5', 10: '10', 15: '15', 20: '20', 30: '30', 40: '40', 50: '50', 60: '60', 70: '70', 80: '80', 90: '90', 100: '100' }}\r\n\t\t\t\tvalue={this.state.stepsNum}\r\n\t\t\t\tonChange={(value) => this.onStepsSliderChange(value)}\r\n\t\t\t/>\r\n\t\t</div>);\r\n\t}\r\n\trenderSpeedRange() {\r\n\t\treturn (<div>\r\n\t\t\t{Tr(\"BPM range\")}\r\n\t\t\t<AdvancedRange\r\n\t\t\t\tref=\"bpmRange\"\r\n\t\t\t\tmin={Config.MIN_BPM}\r\n\t\t\t\tmax={Config.MAX_BPM}\r\n\t\t\t\tdefaultValue={[\r\n\t\t\t\t\tthis.state.bpmRange[0],\r\n\t\t\t\t\tthis.state.bpmRange[1]\r\n\t\t\t\t]}\r\n\t\t\t\teditInPlace={true}\r\n\t\t\t\tpushable={true}\r\n\t\t\t\tonAfterChange={(value) => this.onBpmRangeChange(value)}\r\n\t\t\t/>\r\n\t\t</div>);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<SimplePanel className=\"ModePanel\" title=\"Mode\" width=\"300px\">\r\n\t\t\t\t<h6>{Tr('Increase speed')}</h6>\r\n\t\t\t\t<ButtonGroup size=\"sm\">\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\toutline\r\n\t\t\t\t\t\tonClick={() => this.onModeChange(PlayModes.SET_TIME)}\r\n\t\t\t\t\t\tactive={this.state.playMode === PlayModes.SET_TIME}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{Tr(\"Set time\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\toutline\r\n\t\t\t\t\t\tonClick={() => this.onModeChange(PlayModes.BY_BAR)}\r\n\t\t\t\t\t\tactive={this.state.playMode === PlayModes.BY_BAR}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{Tr(\"By bar\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\toutline\r\n\t\t\t\t\t\tonClick={() => this.onModeChange(PlayModes.BY_TIME)}\r\n\t\t\t\t\t\tactive={this.state.playMode === PlayModes.BY_TIME}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{Tr(\"By time\")}\r\n\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\toutline\r\n\t\t\t\t\t\tonClick={() => this.onModeChange(PlayModes.CONSTANT)}\r\n\t\t\t\t\t\tactive={this.state.playMode === PlayModes.CONSTANT}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{Tr(\"Constant\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</ButtonGroup>\r\n\r\n\r\n\r\n\t\t\t\t<Collapse isOpen={this.state.playMode !== PlayModes.CONSTANT}>\r\n\t\t\t\t\t{this.renderSpeedRange()}\r\n\t\t\t\t</Collapse>\r\n\r\n\t\t\t\t<Collapse isOpen={this.state.playMode === PlayModes.SET_TIME}>\r\n\t\t\t\t\t{this.renderTimeSlider()}\r\n\t\t\t\t\t{this.renderStepsSlider()}\r\n\t\t\t\t</Collapse>\r\n\r\n\t\t\t\t<Collapse isOpen={this.state.playMode === PlayModes.BY_BAR}>\r\n\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{Tr(\"Increase speed every\")}\r\n\t\t\t\t\t\t<GeometricSlider\r\n\t\t\t\t\t\t\tref=\"byBarSlider\"\r\n\t\t\t\t\t\t\tdefaultValue={this.state.byBarInterval}\r\n\t\t\t\t\t\t\tbadgeFormatter={this.byBarFormatter}\r\n\t\t\t\t\t\t\tonChange={v => this.onBarIntervalChange(v)}\r\n\t\t\t\t\t\t\tmin={1}\r\n\t\t\t\t\t\t\tmax={301}\r\n\t\t\t\t\t\t\tmarksAt={[1, 2, 5, 10, 20, 50, 100, 300]}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Collapse>\r\n\t\t\t\t<Collapse isOpen={this.state.playMode === PlayModes.BY_TIME}>\r\n\t\t\t\t\t<div>\r\n\r\n\t\t\t\t\t\t{Tr(\"Increase speed every\")}\r\n\t\t\t\t\t\t<GeometricSlider\r\n\t\t\t\t\t\t\tref=\"byTimeSlider\"\r\n\t\t\t\t\t\t\tdefaultValue={this.state.byTimeInterval}\r\n\t\t\t\t\t\t\tbadgeFormatter={Utils.formatTimeLong}\r\n\t\t\t\t\t\t\tmarkFormatter={Utils.formatTime}\r\n\t\t\t\t\t\t\tonChange={v => this.onTimeIntervalChange(v)}\r\n\t\t\t\t\t\t\tmin={1}\r\n\t\t\t\t\t\t\tmax={1200}\r\n\t\t\t\t\t\t\tmarksAt={[1, 2, 5, 10, 30, 60, 120, 240, 600, 1200]}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Collapse>\r\n\r\n\t\t\t\t<Collapse isOpen={this.state.playMode !== PlayModes.CONSTANT && this.state.playMode !== PlayModes.SET_TIME}>\r\n\t\t\t\t\t{this.renderIncreaseBpmDropdown()}\r\n\t\t\t\t</Collapse>\r\n\r\n\t\t\t\t<Collapse isOpen={this.state.playMode === PlayModes.CONSTANT}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{Tr(\"BPM\")}\r\n\r\n\t\t\t\t\t\t<AdvancedSlider\r\n\t\t\t\t\t\t\tref=\"constantBpmSlider\"\r\n\t\t\t\t\t\t\ttitle= {Tr(\"BPM\")}\r\n\t\t\t\t\t\t\tincluded={false}\r\n\t\t\t\t\t\t\teditInPlace={true}\r\n\t\t\t\t\t\t\tmin={Config.MIN_BPM}\r\n\t\t\t\t\t\t\tbtnStep={5}\r\n\t\t\t\t\t\t\tmax={Config.MAX_BPM}\r\n\t\t\t\t\t\t\tmarks={{ 1: '1', 50: '50', 100: '100', 150: '150', 200: '200' }}\r\n\t\t\t\t\t\t\tvalue={this.state.constantBpmSlider}\r\n\t\t\t\t\t\t\tonChange={this.onBpmSliderChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Collapse>\r\n\r\n\t\t\t</SimplePanel>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default ModePanel;\r\n\r\nModePanel.defaultProps = {\r\n\tplayMode: InitPreset.playMode,\r\n\tplaybackMode: InitPreset.playbackMode,\r\n\tinterval: InitPreset.interval,\r\n\tbpmStep: InitPreset.bpmStep,\r\n\tbpmRange: InitPreset.bpmRange,\r\n\tbyTimeInterval: InitPreset.byTimeInterval,\r\n\tbyBarInterval: InitPreset.byBarInterval,\r\n\tstepsNum: InitPreset.stepsNum,\r\n\texerciseTime: InitPreset.exerciseTime,\r\n\tconstantBpmSlider: InitPreset.constantBpmSlider,\r\n\t// currentBpm: InitPreset.bpmRange[0],\r\n\tonAfterChange: null\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { Badge, ButtonGroup, Button, ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\r\nimport { Samples, InstrumentsByKey } from '../Instruments'\r\nimport { InitPreset } from '../PresetsLib'\r\nimport Tr from './../Locale'\r\nimport Config from \"../Config\";\r\nclass TrackRow extends Component {\r\n\r\n    state = {\r\n        activeIdx: null,\r\n        label: Tr(\"Please select\")\r\n\r\n        // instrument: null\r\n    }\r\n\r\n    componentDidMount() {\r\n        // load initial sample defined in InitPreset\r\n        if (!InitPreset.samples[this.props.idx]) {\r\n            return\r\n        }\r\n\r\n        // TODO: I think I can find better place for this code. It's doing the job though and I'm lazy so...\r\n        const instrument = InstrumentsByKey[InitPreset.samples[this.props.idx].instrumentKey];\r\n        const file = InitPreset.samples[this.props.idx].file;\r\n        this.onSampleSelect(instrument.key, file);\r\n    }\r\n\r\n    addBeat() {\r\n        if (this.props.trackRow.length < Config.MAXIMUM_TIMESIGNATURE) {\r\n            this.props.onMeasureChange(this.props.trackRow.length + 1)\r\n        }\r\n    }\r\n\r\n    removeBeat() {\r\n        if (this.props.trackRow.length > 1) {\r\n            this.props.onMeasureChange(this.props.trackRow.length - 1)\r\n        }\r\n    }\r\n\r\n    onSampleChange() {\r\n        this.setState(prevState => ({\r\n            sampleDropdownOpen: !prevState.sampleDropdownOpen\r\n        }));\r\n\r\n    }\r\n\r\n    onSampleSelect(instrumentKey, filename) {\r\n        this.props.soundLibrary.use(this.props.idx, instrumentKey, filename)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"trackRow\">\r\n                <div className=\"label\">\r\n                    <ButtonDropdown\r\n                        isOpen={this.state.sampleDropdownOpen}\r\n                        toggle={() => this.onSampleChange()}\r\n                    >\r\n                        <DropdownToggle\r\n                            caret\r\n                            size=\"sm\"\r\n                            outline\r\n                            // className='w-100'\r\n                            style={{ width: '6rem' }}\r\n                            color=\"light\"\r\n                            ref=\"dropdown\"\r\n                        >\r\n                            {this.props.soundLibrary.playersArr[this.props.idx] ? this.props.soundLibrary.playersArr[this.props.idx].fullLabel : Tr('Select')}\r\n                            {/* {(this.props.instrument && this.props.instrument.file) || 'Please select'} */}\r\n                        </DropdownToggle>\r\n                        <DropdownMenu>\r\n                            {\r\n                                Samples.map((sample, idx) => {\r\n                                    return (\r\n                                        <DropdownItem key={'row_' + idx} onClick={() => this.onSampleSelect(sample.instrumentKey, sample.file)}>\r\n                                            {InstrumentsByKey[sample.instrumentKey].label} - {sample.label}\r\n                                        </DropdownItem>);\r\n                                })\r\n                            }\r\n                        </DropdownMenu>\r\n                    </ButtonDropdown>\r\n\r\n                    <Badge color=\"outline\" style={{ alignSelf: 'center', width: '1.2rem'}}>{ this.props.trackRow.length }</Badge>\r\n                    {/* <Badge color=\"outline\">{this.props.trackRow.length != this.props.timeSignature ? this.props.trackRow.length : ''}</Badge> */}\r\n                    \r\n                    <ButtonGroup size=\"xs\" vertical>\r\n                        <Button onClick={() => this.addBeat()}>+</Button>\r\n                        <Button onClick={() => this.removeBeat()}>-</Button>\r\n                    </ButtonGroup>\r\n                </div>\r\n\r\n                <div className=\"cells\" ref=\"cellsDiv\">\r\n                    {/* <div className='indicator' style={{ left: this.props.progress + '%', position: 'relative' }}>|</div> */}\r\n                    {\r\n                        this.props.trackRow.map((el, idx) => {\r\n                            const style = {}\r\n                            if (this.props.trackRow[idx]) {\r\n                                style.backgroundColor = Config.COLOR_PALETTE[this.props.idx]\r\n                            }\r\n                            return (\r\n                                <div\r\n                                    key={\"cell_\" + idx}\r\n                                    className=\"clickable cell\"\r\n                                    style={style}\r\n                                    onClick={() => this.props.onClick(this.props.idx, idx)} />\r\n                            )\r\n                        })\r\n                    }\r\n                </div>\r\n            </div >\r\n        )\r\n    }\r\n}\r\n\r\nexport default TrackRow;\r\n\r\nTrackRow.defaultProps = {\r\n}\r\n\r\n","import React, { Component } from \"react\";\r\nimport TrackRow from './TrackRow'\r\nimport SimplePanel from \"../SimplePanel\";\r\nimport { Badge, Button, ButtonGroup } from 'reactstrap'\r\nimport { InitPreset } from \"../PresetsLib\";\r\nimport Tr from \"../Locale\"\r\nimport Config from \"../Config\";\r\n\r\nclass TrackView extends Component {\r\n    state = {\r\n        // track: this.props.track,\r\n        // trackInstruments: [],\r\n        timeSignature: this.props.timeSignature\r\n    }\r\n\r\n    rowRefs = [];\r\n\r\n    handleCellClick(sampleIdx, columnIdx) {\r\n        // copy array\r\n        let track = [...this.props.track];\r\n\r\n        let v = track[sampleIdx][columnIdx];\r\n\r\n        if (v > 0) {\r\n            track[sampleIdx][columnIdx] = 0;\r\n        }\r\n        else {\r\n            track[sampleIdx][columnIdx] = 1;\r\n        }\r\n        this.props.onChange(track, this.props.timeSignature);\r\n    }\r\n\r\n    setProgress(progress) {\r\n        this.indicator.style.left = this.indicator.minLeft + progress * (this.indicator.maxRight - this.indicator.minLeft) + 'px'\r\n    }\r\n\r\n    updateDimensions() {\r\n        // TODO: this is quite ugly\r\n        const cellsBBtop = this.refs.trackRow_0.refs.cellsDiv.getBoundingClientRect();\r\n        const cellsBBbottom = this.refs.trackRow_3.refs.cellsDiv.getBoundingClientRect();\r\n        const box = { left: cellsBBtop.left, top: cellsBBtop.top, bottom: cellsBBbottom.bottom, right: cellsBBbottom.right };\r\n        const indicator = this.refs.indicator;\r\n\r\n        const left = this.refs.trackRow_0.refs.cellsDiv.offsetLeft;\r\n        indicator.minLeft = this.refs.trackRow_0.refs.cellsDiv.offsetLeft;\r\n        const right = left + this.refs.trackRow_0.refs.cellsDiv.offsetWidth;\r\n        indicator.style.left = left + 'px'\r\n        indicator.maxRight = right;\r\n\r\n        indicator.style.height = box.bottom - box.top + 'px'\r\n        this.indicator = indicator;\r\n\r\n\r\n    }\r\n    componentDidMount() {\r\n        window.addEventListener('resize', () => this.updateDimensions());\r\n        this.updateDimensions();\r\n    }\r\n\r\n    addBeat() {\r\n        // add silent beat to each track, make sure we don't exceed max allowed timesignature\r\n\r\n        if (this.props.timeSignature < Config.MAXIMUM_TIMESIGNATURE) {\r\n            let track = [...this.props.track]\r\n\r\n            for (let i = 0; i < track.length; i++) {\r\n                if (track[i].length < Config.MAXIMUM_TIMESIGNATURE) {\r\n                    track[i].push(0)\r\n                }\r\n            }\r\n            this.props.onChange(track, this.props.timeSignature + 1)\r\n        }\r\n    }\r\n\r\n    removeBeat() {\r\n        // remove a beat from each track, making sure there won't be negative timeSignatures on any track\r\n\r\n        if (this.props.timeSignature > 1) {\r\n            let track = [...this.props.track];\r\n\r\n            for (let i = 0; i < track.length; i++) {\r\n                if (track[i].length > 1) {\r\n                    track[i].pop()\r\n                }\r\n            }\r\n            this.props.onChange(track, this.props.timeSignature - 1)\r\n\r\n        }\r\n    }\r\n\r\n    onTrackRowSignatureChange(trackId, newTimeSignature) {\r\n\r\n        if (newTimeSignature < 24) {\r\n            let track = [...this.props.track]\r\n            if (newTimeSignature > track[trackId].length) {\r\n                // add silent beat\r\n                track[trackId].push(0);\r\n\r\n            }\r\n            else {\r\n                track[trackId].pop();\r\n            }\r\n\r\n            this.props.onChange(track, this.props.timeSignature)\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.updateDimensions();\r\n    }\r\n\r\n    render() {\r\n\r\n        let indicatorProgress = 0;\r\n        if (this.indicator) {\r\n            indicatorProgress = this.indicator.minLeft + this.props.partProgress * (this.indicator.maxRight - this.indicator.minLeft) + 'px';\r\n        }\r\n\r\n        return (\r\n            <SimplePanel style={{ padding: '15px' }} title={Tr(\"Sequencer\")}>\r\n                <div className=\"trackView\">\r\n                    <div className=\"trackContainer\">\r\n                        <div className=\"indicator\" ref='indicator' style={{ left: indicatorProgress }} />\r\n                        {\r\n                            // TODO: get rid of this hardcoded stuff\r\n                            [0, 1, 2, 3].map(idx => {\r\n                                return (\r\n                                    <TrackRow\r\n                                        idx={idx}\r\n                                        ref={\"trackRow_\" + idx}\r\n                                        soundLibrary={this.props.soundLibrary}//.use(idx, instrument, file);\r\n                                        onMeasureChange={(newTimeSignature) => this.onTrackRowSignatureChange(idx, newTimeSignature)}\r\n                                        key={\"trackRow_\" + idx}\r\n                                        timeSignature={this.props.timeSignature}\r\n                                        progress={this.props.progress}\r\n                                        trackRow={this.props.track[idx]}\r\n                                        onClick={(sampleIdx, trackIdx) => this.handleCellClick(sampleIdx, trackIdx)}\r\n                                    />\r\n                                )\r\n                            })\r\n                        }\r\n                    </div>\r\n                    <div className=\"btnContainer\">\r\n                        <ButtonGroup size=\"sm\" vertical>\r\n                            <Button onClick={() => this.addBeat()}>+</Button>\r\n                            <Button onClick={() => this.removeBeat()}>-</Button>\r\n                        </ButtonGroup>\r\n                        <div height=\"1em\">\r\n                            <Badge className=\"beatsCntBadge\" color=\"dark\">{this.props.timeSignature}</Badge>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                </div>\r\n            </SimplePanel>\r\n        )\r\n    }\r\n}\r\n\r\nexport default TrackView;\r\n\r\nTrackView.defaultProps = {\r\n    track: InitPreset.track\r\n}\r\n\r\n","import Tone from 'tone'\r\nimport { Samples, InstrumentsByKey } from './Instruments';\r\n\r\nclass SoundLibrary  {\r\n    players = new Tone.Players({})\r\n    playersArr = []; \r\n  \r\n    reverb = new Tone.Reverb().toMaster();\r\n\r\n    constructor(props) {\r\n        // this is required for convolution rever to generate IR profile\r\n        this.reverb.decay = 4;\r\n        this.reverb.predelay = 0.05;\r\n        this.reverb.generate();\r\n\r\n        this.reverb.wet.value = 0;\r\n        this.players.connect(this.reverb);\r\n        this.players.toMaster();\r\n    }\r\n\r\n   \r\n    use(idx, instrumentKey, file) {\r\n        const instrument = InstrumentsByKey[instrumentKey];\r\n\r\n        // console.log('process', process)\r\n        this.players.add('player_' + idx, './audio/' + instrumentKey + '/' + file);// (player) => this.onLoad(player));\r\n        \r\n        let player = this.players.get('player_' + idx);\r\n        player.instrument = instrument;\r\n        player.file = file;\r\n        player.idx = idx;\r\n        player.fullLabel = Samples.find(el => el.file === file).label;\r\n        this.playersArr[idx] = player;\r\n    }\r\n\r\n    getSamples() {\r\n        let samples = [];\r\n        this.playersArr.map(player => {\r\n            samples.push({\r\n                file: player.file,\r\n                instrumentKey: player.instrument.key\r\n            })\r\n            // expected to return value from arrow func\r\n            return true;\r\n        });\r\n        return samples;\r\n    }\r\n\r\n    play(trackIdx, time) {\r\n        const player = this.playersArr[trackIdx];\r\n        if (player && player.loaded) {\r\n            player.start(time);\r\n        }\r\n    }\r\n\r\n    setReverb(wet) {\r\n        this.reverb.wet.value = wet;\r\n    }\r\n}\r\nexport default SoundLibrary;","import React, { Component } from \"react\";\r\nimport Tone from \"tone\";\r\nimport { Container, Row, Col } from \"reactstrap\";\r\nimport SimplePanel from './SimplePanel'\r\nimport { Button } from 'reactstrap'\r\nimport { InitPreset } from './PresetsLib'\r\nimport Planner from './Planner'\r\nimport Tr from './Locale'\r\nimport PresetsManager from './PresetsManager'\r\nimport PracticeTimer from './PracticeTimer'\r\nimport SvgClock from \"./SvgClock\";\r\nimport ModePanel from './ModePanel'\r\nimport TrackView from './TrackView/TrackView'\r\nimport KeyboardEventHandler from 'react-keyboard-event-handler'\r\nimport Config from './Config'\r\nimport SoundLibrary from \"./SoundLibrary\";\r\nimport AdvancedSlider from \"./Sliders/AdvancedSlider\";\r\n\r\nclass SoundMachine extends Component {\r\n\tsoundLibrary = new SoundLibrary();\r\n\r\n\tstate = {\r\n\t\tinitialized: false,\r\n\t\tconfig: InitPreset,\r\n\t\ttrack: this.props.track,\r\n\t\ttimeSignature: this.props.timeSignature\r\n\t};\r\n\r\n\ttransport = Tone.Transport;\r\n\ttone = Tone;\r\n\r\n\tcomponentDidMount() {\r\n\t\tTone.Transport.lookAhead = 10;\r\n\r\n\t\t// initialize main loop\r\n\t\tthis.part = new Tone.Part((time, note) => this.repeat(time, note), [])\r\n\t\tthis.part.loop = true;\r\n\t\t// this.part.humanize = true;\r\n\t\tthis.part.start(0)\r\n\r\n\r\n\t\tconst config = this.getConfig();\r\n\t\tthis.setPlan(config);\r\n\t\tthis.setBpm(config.constantBpmSlider);\r\n\r\n\t\tthis.initProgressUpdate();\r\n\t\tthis.documentTitle = document.title;\r\n\r\n\t\tthis.setState({ initialized: true })\r\n\t\tthis.props.onReady();\r\n\t}\r\n\r\n\tgetConfig() {\r\n\t\treturn { ...this.refs.modePanel.state, ...{ track: this.state.track }, ...{ timeSignature: this.state.timeSignature }, ...{ samples: this.soundLibrary.getSamples() } };\r\n\t}\r\n\r\n\tinitProgressUpdate() {\r\n\t\tsetInterval(() => this.onProgress(), 1000 / Config.PROGRESS_UPDATE_FPS)\r\n\t}\r\n\r\n\tsetPlan(config) {\r\n\t\t// cancel all events\r\n\t\tthis.transport.cancel();\r\n\t\tthis.transport.position = 0;\r\n\t\tthis.setTrack(config.track.slice(), config.timeSignature);\t// TODO: Unsure why we need to pass copy\r\n\t\tthis.refs.planner.setPlan(config);\r\n\r\n\t}\r\n\r\n\t// trackRow.length determine polyrhythm measure, timeSignature is main time signature we relate polyrythms to\r\n\tcreatePoly(trackRow, trackIdx, timeSignature) {\r\n\t\tconst ticks = this.tone.Time(\"1m\").toTicks();\r\n\t\tconst interval = ticks / trackRow.length;\r\n\r\n\t\tfor (let i = 0; i < trackRow.length; i++) {\r\n\t\t\tif (trackRow[i] > 0) {\r\n\t\t\t\tthis.part.add(interval.toFixed(0) * i + 'i', trackIdx);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tsetTrack(track, timeSignature) {\r\n\t\tif (this.state.track === track) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// make sure we have 4 tracks\r\n\t\tif (track.length < Config.TRACKS_NUMBER) {\r\n\t\t\ttrack.push(new Array(timeSignature).fill(0));\r\n\t\t}\r\n\t\tthis.setTimeSignature(timeSignature);\r\n\r\n\t\tthis.part.removeAll();\r\n\r\n\t\tfor (let i = 0; i < track.length; i++) {\r\n\t\t\tthis.createPoly(track[i], i, timeSignature)\r\n\t\t}\r\n\t\tthis.part.loopEnd = '1m'\r\n\t\tthis.part.start(0);\r\n\r\n\t\tthis.setState({ track: track, timeSignature: timeSignature })\r\n\r\n\t}\r\n\r\n\tonProgress() {\r\n\t\tif (this.transport.state === 'stopped') {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.refs.debug) {\r\n\t\t\tthis.refs.debug.innerHTML = this.transport.seconds.toFixed(1)\r\n\t\t}\r\n\r\n\t\tif (this.refs.planner) { this.refs.planner.updateProgress() }\r\n\r\n\t\tthis.refs.svgClock.setProgress(this.part.progress)\r\n\t\tthis.refs.trackView.setProgress(this.part.progress)\r\n\t}\r\n\r\n\trepeat = (time, trackIdx) => {\r\n\t\tthis.soundLibrary.play(trackIdx, time)\r\n\t}\r\n\r\n\tcalcTimeForBpm(seconds, bpm) {\r\n\t\treturn Tone.Time(seconds * bpm / this.baseBpm);\r\n\t}\r\n\r\n\tsetTimeSignature(timeSignature) {\r\n\t\tif (timeSignature !== this.transport.timeSignature) {\r\n\t\t\tthis.transport.timeSignature = timeSignature;\r\n\t\t}\r\n\t}\r\n\r\n\tsetBpm = bpm => {\r\n\r\n\t\tif (isNaN(bpm) || bpm < 1 || bpm > 200) {\r\n\t\t\tthrow new Error(\"Invalid BPM value: \" + bpm)\r\n\t\t}\r\n\r\n\t\tif (bpm !== this.transport.bpm.value) {\r\n\t\t\tTone.Transport.bpm.value = bpm;\r\n\r\n\t\t\tdocument.title = bpm.toFixed(0) + ' | ' + this.documentTitle;\r\n\r\n\t\t\t// the animation and overflow retrigger seems to make metronome bit jiggery, unsure if we should implement it\r\n\t\t\t// this.refs.bpmInfo.classList.remove('bump')\r\n\t\t\t// void this.refs.bpmInfo.offsetWidth;\r\n\t\t\t// this.refs.bpmInfo.classList.add('bump');\r\n\t\t\t// const bpmInfo = this.refs.bpmInfo\r\n\t\t\t// bpmInfo.addEventListener( \"animationend\",  function() {\r\n\t\t\t// \tbpmInfo.classList.remove(\"bump\");\r\n\t\t\t//   } );\r\n\t\t\tthis.setState({ bpm: bpm })\r\n\t\t}\r\n\t};\r\n\r\n\ttoggle() {\r\n\t\tTone.Transport.state === 'started' ? this.stop() : this.start();\r\n\t};\r\n\r\n\tonPlanStep(bpm) {\r\n\t\tthis.setBpm(bpm);\r\n\t}\r\n\r\n\tonControlChange() {\r\n\t\tconst v = this.getConfig();\r\n\t\tthis.setPlan(v);\r\n\t}\r\n\r\n\tonPresetSelect(preset) {\r\n\t\t// set preset's stuff\r\n\t\tthis.setState({ track: preset.track, timeSignature: preset.timeSignature }, function () {\r\n\t\t\tthis.refs.modePanel.setValue(preset)\r\n\t\t});\r\n\r\n\t\t// set instruments\r\n\t\tfor (let i = 0; i < preset.samples.length; i++) {\r\n\t\t\tthis.soundLibrary.use(i, preset.samples[i].instrumentKey, preset.samples[i].file)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tonTrackChange(newTrack, timeSignature) {\r\n\t\tif (this.state.timeSignature !== timeSignature) {\r\n\t\t\t// length changed so after setting track, recreate Plan\r\n\t\t\tconst config = this.getConfig();\r\n\t\t\tconfig.track = newTrack;\r\n\t\t\tconfig.timeSignature = timeSignature;\r\n\t\t\tthis.setPlan(config);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.setTrack(newTrack, timeSignature)\r\n\t\t}\r\n\t}\r\n\r\n\tonVolumeChange(newVolume) {\r\n\t\tthis.tone.Master.volume.value = -60 + (newVolume * 60 / 100) + 6\r\n\t}\r\n\r\n\tonReverbChange(value) {\r\n\t\tthis.soundLibrary.setReverb(value / 100)\r\n\t}\r\n\r\n\thandleKey(key, e) {\r\n\t\te.preventDefault();\r\n\t\tswitch (key) {\r\n\t\t\tcase 's':\r\n\t\t\tcase 'space':\r\n\t\t\t\tthis.toggle();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'esc':\r\n\t\t\t\tthis.stop();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'left':\r\n\t\t\t\tthis.refs.planner.stepBackward()\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'right':\r\n\t\t\t\tthis.refs.planner.stepForward()\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'up':\r\n\t\t\t\tif (this.state.bpm < 200) {\r\n\t\t\t\t\tthis.setBpm(this.state.bpm + 1);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'down':\r\n\t\t\t\tif (this.state.bpm > 1) {\r\n\t\t\t\t\tthis.setBpm(this.state.bpm - 1);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'shift+up':\r\n\t\t\t\tif (this.state.bpm < 200) {\r\n\t\t\t\t\tthis.setBpm(this.state.bpm + 10);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'shift+down':\r\n\t\t\t\tif (this.state.bpm > 1) {\r\n\t\t\t\t\tthis.setBpm(this.state.bpm - 10);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\r\n\t\t\t<>\r\n\t\t\t\t<KeyboardEventHandler handleKeys={['s', 'space', 'esc', 'left', 'right', 'up', 'down', 'shift+up', 'shift+down']} onKeyEvent={(key, e) => this.handleKey(key, e)} />\r\n\t\t\t\t<Container>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<SimplePanel title={Tr('Control')}>\r\n\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\t// color=\"primary\"\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => this.toggle()}\r\n\t\t\t\t\t\t\t\t\t\t\tcolor={this.state.isPlaying ? 'secondary' : 'light'}\r\n\t\t\t\t\t\t\t\t\t\t\t// outline\r\n\t\t\t\t\t\t\t\t\t\t\tblock\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{Tr(\"Start / Stop\")}\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Row>\r\n\r\n\t\t\t\t\t\t\t\t<Row><Col><h2><span ref=\"bpmInfo\" className='badge badge-dark bpm-info'>BPM: {Tone.Transport.bpm.value.toFixed(0)}</span></h2></Col>\r\n\t\t\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t{Tr(\"Volume\")}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<AdvancedSlider\r\n\t\t\t\t\t\t\t\t\t\t\t\tref=\"volumeSlider\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t// included={false}\r\n\t\t\t\t\t\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisableBtns={true}\r\n\t\t\t\t\t\t\t\t\t\t\t\tbtnStep={1}\r\n\t\t\t\t\t\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={90}\r\n\t\t\t\t\t\t\t\t\t\t\t\t// marks={{ 30:k '30', 200: '200', 400: '400', 600: '600', 800: '800', 1000: '1000',  1200: '1200' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t// value={this.state.constantBpmSlider}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(newVolume) => this.onVolumeChange(newVolume)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div>{Tr(\"Reverb\")}</div>\r\n\t\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t\t<AdvancedSlider\r\n\t\t\t\t\t\t\t\t\t\t\t\tref=\"reverbSlider\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t// included={false}\r\n\t\t\t\t\t\t\t\t\t\t\t\tmin={0}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdisableBtns={true}\r\n\t\t\t\t\t\t\t\t\t\t\t\tbtnStep={1}\r\n\t\t\t\t\t\t\t\t\t\t\t\tmax={100}\r\n\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={0}\r\n\t\t\t\t\t\t\t\t\t\t\t\t// marks={{ 30:k '30', 200: '200', 400: '400', 600: '600', 800: '800', 1000: '1000',  1200: '1200' }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t// value={this.state.constantBpmSlider}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(newVolume) => this.onReverbChange(newVolume)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t\t\t</Row>\r\n\r\n\t\t\t\t\t\t\t</SimplePanel>\r\n\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t<Col style={{ margin: 'auto' }}>\r\n\t\t\t\t\t\t\t<SvgClock ref=\"svgClock\" soundLibrary={this.soundLibrary} timeSignature={this.state.timeSignature} track={this.state.track} />\r\n\t\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<PracticeTimer onTimeUp={() => this.stop()} />\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<ModePanel\r\n\t\t\t\t\t\t\tref=\"modePanel\"\r\n\t\t\t\t\t\t\ttransport={this.transport}\r\n\t\t\t\t\t\t\tonChange={() => this.onControlChange()}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<TrackView\r\n\t\t\t\t\t\t\t\tref='trackView'\r\n\t\t\t\t\t\t\t\tsoundLibrary={this.soundLibrary}\r\n\t\t\t\t\t\t\t\ttrack={this.state.track}\r\n\t\t\t\t\t\t\t\t// partProgress={this.state.partProgress}\r\n\t\t\t\t\t\t\t\tinstrument={this.state.instrument}\r\n\t\t\t\t\t\t\t\t// instrumentLib={this.instrumentLib}\r\n\t\t\t\t\t\t\t\ttimeSignature={this.state.timeSignature}\r\n\t\t\t\t\t\t\t\t// onInstrumentChanged={(trackIdx, instrument) => this.onInstrumendChanged(trackIdx, instrument)}\r\n\t\t\t\t\t\t\t\tonChange={(track, timeSignature) => this.onTrackChange(track, timeSignature)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<Planner\r\n\t\t\t\t\t\t\t\ttransport={this.transport}\r\n\t\t\t\t\t\t\t\tonChange={() => this.onControlChange()}\r\n\t\t\t\t\t\t\t\tonPlanStep={(bpm) => this.onPlanStep(bpm)}\r\n\t\t\t\t\t\t\t\tonPlanEnd={() => this.stop()}\r\n\t\t\t\t\t\t\t\tref=\"planner\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<PresetsManager\r\n\t\t\t\t\t\t\t\tref=\"presetsManager\"\r\n\t\t\t\t\t\t\t\tgetPreset={() => this.getConfig()}\r\n\t\t\t\t\t\t\t\tonSelect={preset => this.onPresetSelect(preset)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\r\n\t\t\t\t</Container >\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\r\n\tstop() {\r\n\r\n\t\tthis.transport.stop();\r\n\t\tthis.transport.position = 0;\r\n\t\tthis.setState({ isPlaying: false });\r\n\t}\r\n\r\n\tstart() {\r\n\t\tthis.transport.start(\"+.1\");\r\n\t\tthis.part.start();\r\n\t\tthis.setState({ isPlaying: true });\r\n\t}\r\n}\r\n\r\nexport default SoundMachine;\r\n\r\n\r\nSoundMachine.defaultProps = {\r\n\tinstrument: InitPreset.instrument,\r\n\ttrack: InitPreset.track,\r\n\ttimeSignature: InitPreset.timeSignature,\r\n\tonReady: function () { }\r\n};","import React, { Component } from \"react\";\r\nimport \"./App.css\";\r\n// import \"./components/SoundMachine\";\r\nimport SoundMachine from \"./components/SoundMachine\";\r\nimport \"rc-slider/assets/index.css\";\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport { Badge, Container, Row, Col } from \"reactstrap\";\r\nimport SimplePanel from \"./components/SimplePanel\";\r\nimport ReactGA from 'react-ga';\r\nimport Tr from './components/Locale'\r\n\r\nclass App extends Component {\r\n\r\n\tstate = {\r\n\t\tshowMask: true\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t// google analytics\r\n\t\tReactGA.initialize({\r\n\t\t\ttrackingId: 'UA-151010848-1',\r\n\t\t\tdebug: false,\r\n\t\t\tgaOptions: {\r\n\t\t\t\tcookieDomain: 'none'\r\n\t\t\t}\r\n\t\t});\r\n\t\tReactGA.pageview(window.location.pathname + window.location.search);\r\n\t}\r\n\r\n\tremoveLoadMask() {\r\n\t\tthis.setState({ showMask: false })\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<Container className=\"app-container \">\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<SoundMachine ref=\"sm\" onReady={() => this.removeLoadMask()} />\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<SimplePanel title={Tr(\"Keyboard controls\")} className=\"about\">\r\n\t\t\t\t\t\t\t\t<div><code>{Tr(\"(shift) arrow up/down\")}</code> - {Tr(\"higher/lower BPM\")}</div>\r\n\t\t\t\t\t\t\t\t<div><code>{Tr(\"arrow left/right\")}</code> - {Tr(\"previous/next step according to plan\")}</div>\r\n\t\t\t\t\t\t\t\t<div><code>space, s</code> - {Tr(\"start/stop\")}</div>\r\n\t\t\t\t\t\t\t\t<div><code>esc</code> - {Tr(\"stop\")}</div>\r\n\t\t\t\t\t\t\t</SimplePanel>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t<div className=\"footer\">\r\n\t\t\t\t\t\t\t\t{/* TODO: i18n */}\r\n\t\t\t\t\t\t\t\t<div><h6>If you like this app consider donation to a developer using following <Badge href=\"https://www.buymeacoffee.com/indiebubbler\" target=\"blank\">link</Badge></h6></div>\r\n\t\t\t\t\t\t\t\t<div>Join discord using <Badge href=\"https://discord.gg/fAwnmVh\" target=\"blank\">this link</Badge> for feedback and improvement suggestions.</div>\r\n\t\t\t\t\t\t\t\t<div>By using this site you agree to the use of cookies to store user defined presets and analytics.</div>\r\n\r\n\t\t\t\t\t\t\t\t<div>If you want help translating this page please contact <Badge href=\"mailto:indiebubbler@gmail.com?subject=Feedback\">indiebubbler@gmail.com</Badge>.</div>\r\n\t\t\t\t\t\t\t\t<div>Made using <Badge href=\"https://reactjs.org/\" target=\"blank\" >React</Badge> and <Badge href=\"https://tonejs.github.io/\" target=\"blank\">Tone.js</Badge>.</div>\r\n\t\t\t\t\t\t\t\t<div>Ideas for visualisation and presets taken from <Badge href=\"http://www.ethanhein.com/wp/my-nyu-masters-thesis\" target=\"blank\">Ethan Hein's site</Badge>.</div>\r\n\t\t\t\t\t\t\t\t<div>&#169; IndieBubbler 2019-2020. Version 2.2</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t</Row>\r\n\t\t\t\t</Container>\r\n\t\t\t\t<div ref=\"loadMask\" className={this.state.showMask === true ? 'loadmask ' : 'loadmask fadeOut'} />\r\n\t\t\t</div>\r\n\r\n\t\t);\r\n\t}\r\n\r\n}\r\n\r\nexport default App;","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(   <App  />  , document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.register();"],"sourceRoot":""}